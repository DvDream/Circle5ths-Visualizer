{"version":3,"sources":["js/tonal/extensions/detect/node_modules/tonal-note/build/es6.js","js/tonal/extensions/detect/node_modules/tonal-interval/build/es6.js","js/tonal/extensions/detect/node_modules/tonal-dictionary/node_modules/tonal-array/build/es6.js","js/tonal/extensions/detect/node_modules/tonal-dictionary/node_modules/tonal-pcset/build/es6.js","js/tonal/extensions/detect/node_modules/tonal-dictionary/build/es6.js","js/tonal/extensions/detect/node_modules/tonal-array/build/es6.js","js/tonal/extensions/detect/node_modules/tonal-pcset/build/es6.js","js/tonal/extensions/detect/index.js","../packages/note/build/es6.js","../packages/array/build/es6.js","../packages/interval/build/es6.js","../packages/distance/build/es6.js","../packages/pcset/build/es6.js","../packages/scale/build/es6.js","../packages/chord/build/es6.js","../packages/dictionary/build/es6.js","../packages/tonal/index.js","js/canvas.js","js/circleFifth.js","js/canvas_progression.js","js/dizionario.js","js/Keyboard_JS.js"],"names":["NAMES","split","names","accTypes","slice","filter","n","acc","indexOf","SHARPS","FLATS","REGEX","tokenize","str","m","exec","toUpperCase","replace","NO_NOTE","Object","freeze","pc","name","step","alt","oct","octStr","chroma","midi","freq","SEMI","properties","tokens","letter","p","charCodeAt","length","midiToFreq","memo","fn","cache","props","isMidiRange","note","value","tuning","Math","pow","L2","log","L440","freqToMidi","v","round","LETTERS","stepToLetter","fillStr","s","Array","join","numToStr","num","op","altToAcc","from","fromProps","baseNote","_a","assign","build","fromMidi","sharps","pcs","o","floor","simplify","sameAcc","alteration","useSharps","enharmonic","IVL_TNL","IVL_STR","RegExp","SIZES","TYPES","CLASSES","types","NO_IVL","q","dir","type","simple","semitones","abs","qToAlt","test","altToQ","numToStep","t","ic","ivl","_b","_c","undefined","d","intervalProps","invert","IN","IQ","fromSemitones","c","ascR","b","a","descR","range","rotate","times","arr","len","concat","compact","height","sort","src","map","unique","i","shuffle","rnd","random","permutations","reduce","perm","e","pos","newPerm","splice","chr","pcsetNum","set","parseInt","clen","isChroma","isArray","forEach","all","chromas","toString","modes","normalize","binary","_","r","IVLS","intervals","isEqual","s1","s2","arguments","isSubsetOf","notes","isSupersetOf","includes","dictionary","raw","keys","data","index","add","ivls","push","key","alias","allKeys","dict","combine","scale","sdata","chord","cdata","pcset","detector","defaultBuilder","tonic","builder","mode","x","Dictionary","unaltered","f","transpose","interval","encodeNote","encodeIvl","tr","fromNote","decode","trFifths","fifths","to","transposeBy","addIntervals","ivl1","ivl2","i1","i2","ibuild","decodeIvl","subtract","noteProps","nameOrTonic","exists","noteName","substring","ref","NUM_TYPES","FIFTHS","fOcts","FIFTH_OCTS","encode","STEPS","encoder","iprops","isDescending","notechr","ivlchr","NO_SCALE","setnum","modeNames","tonics","pcsetModes","chords","inScale","toScale","supersets","isSuperset","subsets","isSubset","NO_CHORD","Distance.transpose","Distance.interval","Note.props","Note.midi","Note.freq","Dictionary.chord","Dictionary.scale","canvas","document","querySelector","ctx","getContext","my_gradient","createLinearGradient","addColorStop","matrix","createMatrix","stepx","width","stepy","stato","xy","alpha","blink","x_canv","y_canv","fillStyle","fillRect","console","cancel_stato","circle","key_","degree","end","count","flag","change_scale","array_app","ciao","$","ready","prop","findKey","vec1","vec2","vec_max","max","apply","indexes","j","key_found","k","find_degrees","split_array","state","shallow","click","scale_maj","css","cancel_degrees","y0","x0","xf","yf","angle","PI","g","difference","velocity","invert_sign","radius","show_square","Ypos","globalAlpha","beginPath","rect","fill","font","fillText","choose_color","color","choose_position","arc","lineWidth","strokeStyle","stroke","choose_velocity","render_prog","time","sign","cos","sin","tg","clearInterval","clear","setInterval","show_progression","degree_arr","clearRect","reset_canvas2","change_progression","dizionario","AudioContext","analyser","createAnalyser","volume_master","createGain","connect","destination","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","gain_vec","chord_","chords_vec","midi_vec","note_vec","collect_note","collect_midi","counter","octave_step","color_chord","maj_scale","chromatic_scale","canvas3","context","getKey","obj","entries","find","every","render","vec","y","getElementsByClassName","innerHTML","style","textAlign","top","fontWeight","verticalAlign","fontFamily","timeOut","getElementById","onclick","classList","toggle","addEventListener","changeVol","gain","parseFloat","ctx2","canvas2","containerWidth","left","onkeydown","repeat","keypressed","playNote","setTimeout","midi_num","detect_chord","onkeyup","querySelectorAll","toggleRect","rect_white","onmousedown","clickOnRect","onmouseup","clickOffRect","id","path","navigator","requestMIDIAccess","then","onMIDISuccess","midiAccess","allInputs","inputs","values","input","next","done","onmidimessage","getMIDImessage","midiMessage","on_off","midi_number","createOscillator","frequency","linearRampToValueAtTime","currentTime","start","drawSamples","releaseNote","Note","min_midi","min","bass_note","accordo","find_indexes","chiave","key_arr","appoggio","index_maj","getByteFrequencyData","lineTo","requestAnimationFrame"],"mappings":"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","file":"Keyboard_JS.5881a727.map","sourceRoot":"..","sourcesContent":["var NAMES = \"C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B\".split(\" \");\r\nvar names = function (accTypes) {\r\n    return typeof accTypes !== \"string\"\r\n        ? NAMES.slice()\r\n        : NAMES.filter(function (n) {\r\n            var acc = n[1] || \" \";\r\n            return accTypes.indexOf(acc) !== -1;\r\n        });\r\n};\r\nvar SHARPS = names(\" #\");\r\nvar FLATS = names(\" b\");\r\nvar REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\r\nfunction tokenize(str) {\r\n    if (typeof str !== \"string\")\r\n        str = \"\";\r\n    var m = REGEX.exec(str);\r\n    return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\r\n}\r\nvar NO_NOTE = Object.freeze({\r\n    pc: null,\r\n    name: null,\r\n    step: null,\r\n    alt: null,\r\n    oct: null,\r\n    octStr: null,\r\n    chroma: null,\r\n    midi: null,\r\n    freq: null\r\n});\r\nvar SEMI = [0, 2, 4, 5, 7, 9, 11];\r\nvar properties = function (str) {\r\n    var tokens = tokenize(str);\r\n    if (tokens[0] === \"\" || tokens[3] !== \"\")\r\n        return NO_NOTE;\r\n    var letter = tokens[0], acc = tokens[1], octStr = tokens[2];\r\n    var p = {\r\n        letter: letter,\r\n        acc: acc,\r\n        octStr: octStr,\r\n        pc: letter + acc,\r\n        name: letter + acc + octStr,\r\n        step: (letter.charCodeAt(0) + 3) % 7,\r\n        alt: acc[0] === \"b\" ? -acc.length : acc.length,\r\n        oct: octStr.length ? +octStr : null,\r\n        chroma: 0,\r\n        midi: null,\r\n        freq: null\r\n    };\r\n    p.chroma = (SEMI[p.step] + p.alt + 120) % 12;\r\n    p.midi = p.oct !== null ? SEMI[p.step] + p.alt + 12 * (p.oct + 1) : null;\r\n    p.freq = midiToFreq(p.midi);\r\n    return Object.freeze(p);\r\n};\r\nvar memo = function (fn, cache) {\r\n    if (cache === void 0) { cache = {}; }\r\n    return function (str) { return cache[str] || (cache[str] = fn(str)); };\r\n};\r\nvar props = memo(properties);\r\nvar name = function (str) { return props(str).name; };\r\nvar pc = function (str) { return props(str).pc; };\r\nvar isMidiRange = function (m) { return m >= 0 && m <= 127; };\r\nvar midi = function (note) {\r\n    if (typeof note !== \"number\" && typeof note !== \"string\") {\r\n        return null;\r\n    }\r\n    var midi = props(note).midi;\r\n    var value = midi || midi === 0 ? midi : +note;\r\n    return isMidiRange(value) ? value : null;\r\n};\r\nvar midiToFreq = function (midi, tuning) {\r\n    if (tuning === void 0) { tuning = 440; }\r\n    return typeof midi === \"number\" ? Math.pow(2, (midi - 69) / 12) * tuning : null;\r\n};\r\nvar freq = function (note) { return props(note).freq || midiToFreq(note); };\r\nvar L2 = Math.log(2);\r\nvar L440 = Math.log(440);\r\nvar freqToMidi = function (freq) {\r\n    var v = (12 * (Math.log(freq) - L440)) / L2 + 69;\r\n    return Math.round(v * 100) / 100;\r\n};\r\nvar chroma = function (str) { return props(str).chroma; };\r\nvar oct = function (str) { return props(str).oct; };\r\nvar LETTERS = \"CDEFGAB\";\r\nvar stepToLetter = function (step) { return LETTERS[step]; };\r\nvar fillStr = function (s, n) { return Array(n + 1).join(s); };\r\nvar numToStr = function (num, op) {\r\n    return typeof num !== \"number\" ? \"\" : op(num);\r\n};\r\nvar altToAcc = function (alt) {\r\n    return numToStr(alt, function (alt) { return (alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt)); });\r\n};\r\nvar from = function (fromProps, baseNote) {\r\n    if (fromProps === void 0) { fromProps = {}; }\r\n    if (baseNote === void 0) { baseNote = null; }\r\n    var _a = baseNote\r\n        ? Object.assign({}, props(baseNote), fromProps)\r\n        : fromProps, step = _a.step, alt = _a.alt, oct = _a.oct;\r\n    if (typeof step !== \"number\")\r\n        return null;\r\n    var letter = stepToLetter(step);\r\n    if (!letter)\r\n        return null;\r\n    var pc = letter + altToAcc(alt);\r\n    return oct || oct === 0 ? pc + oct : pc;\r\n};\r\nvar build = from;\r\nfunction fromMidi(num, sharps) {\r\n    if (sharps === void 0) { sharps = false; }\r\n    num = Math.round(num);\r\n    var pcs = sharps === true ? SHARPS : FLATS;\r\n    var pc = pcs[num % 12];\r\n    var o = Math.floor(num / 12) - 1;\r\n    return pc + o;\r\n}\r\nvar simplify = function (note, sameAcc) {\r\n    if (sameAcc === void 0) { sameAcc = true; }\r\n    var _a = props(note), alt = _a.alt, chroma = _a.chroma, midi = _a.midi;\r\n    if (chroma === null)\r\n        return null;\r\n    var alteration = alt;\r\n    var useSharps = sameAcc === false ? alteration < 0 : alteration > 0;\r\n    return midi === null\r\n        ? pc(fromMidi(chroma, useSharps))\r\n        : fromMidi(midi, useSharps);\r\n};\r\nvar enharmonic = function (note) { return simplify(note, false); };\n\nexport { names, tokenize, props, name, pc, midi, midiToFreq, freq, freqToMidi, chroma, oct, stepToLetter, altToAcc, from, build, fromMidi, simplify, enharmonic };\n","var IVL_TNL = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\r\nvar IVL_STR = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\r\nvar REGEX = new RegExp(\"^\" + IVL_TNL + \"|\" + IVL_STR + \"$\");\r\nvar SIZES = [0, 2, 4, 5, 7, 9, 11];\r\nvar TYPES = \"PMMPPMM\";\r\nvar CLASSES = [0, 1, 2, 3, 4, 5, 6, 5, 4, 3, 2, 1];\r\nvar NAMES = \"1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P\".split(\" \");\r\nvar names = function (types) {\r\n    return typeof types !== \"string\"\r\n        ? NAMES.slice()\r\n        : NAMES.filter(function (n) { return types.indexOf(n[1]) !== -1; });\r\n};\r\nvar tokenize = function (str) {\r\n    var m = REGEX.exec(\"\" + str);\r\n    if (m === null)\r\n        return null;\r\n    return (m[1] ? [m[1], m[2]] : [m[4], m[3]]);\r\n};\r\nvar NO_IVL = Object.freeze({\r\n    name: null,\r\n    num: null,\r\n    q: null,\r\n    step: null,\r\n    alt: null,\r\n    dir: null,\r\n    type: null,\r\n    simple: null,\r\n    semitones: null,\r\n    chroma: null,\r\n    oct: null\r\n});\r\nvar fillStr = function (s, n) { return Array(Math.abs(n) + 1).join(s); };\r\nvar qToAlt = function (type, q) {\r\n    if (q === \"M\" && type === \"M\")\r\n        return 0;\r\n    if (q === \"P\" && type === \"P\")\r\n        return 0;\r\n    if (q === \"m\" && type === \"M\")\r\n        return -1;\r\n    if (/^A+$/.test(q))\r\n        return q.length;\r\n    if (/^d+$/.test(q))\r\n        return type === \"P\" ? -q.length : -q.length - 1;\r\n    return null;\r\n};\r\nvar altToQ = function (type, alt) {\r\n    if (alt === 0)\r\n        return type === \"M\" ? \"M\" : \"P\";\r\n    else if (alt === -1 && type === \"M\")\r\n        return \"m\";\r\n    else if (alt > 0)\r\n        return fillStr(\"A\", alt);\r\n    else if (alt < 0)\r\n        return fillStr(\"d\", type === \"P\" ? alt : alt + 1);\r\n    else\r\n        return null;\r\n};\r\nvar numToStep = function (num) { return (Math.abs(num) - 1) % 7; };\r\nvar properties = function (str) {\r\n    var t = tokenize(str);\r\n    if (t === null)\r\n        return NO_IVL;\r\n    var p = {\r\n        num: 0,\r\n        q: \"d\",\r\n        name: \"\",\r\n        type: \"M\",\r\n        step: 0,\r\n        dir: -1,\r\n        simple: 1,\r\n        alt: 0,\r\n        oct: 0,\r\n        semitones: 0,\r\n        chroma: 0,\r\n        ic: 0\r\n    };\r\n    p.num = +t[0];\r\n    p.q = t[1];\r\n    p.step = numToStep(p.num);\r\n    p.type = TYPES[p.step];\r\n    if (p.type === \"M\" && p.q === \"P\")\r\n        return NO_IVL;\r\n    p.name = \"\" + p.num + p.q;\r\n    p.dir = p.num < 0 ? -1 : 1;\r\n    p.simple = (p.num === 8 || p.num === -8\r\n        ? p.num\r\n        : p.dir * (p.step + 1));\r\n    p.alt = qToAlt(p.type, p.q);\r\n    p.oct = Math.floor((Math.abs(p.num) - 1) / 7);\r\n    p.semitones = p.dir * (SIZES[p.step] + p.alt + 12 * p.oct);\r\n    p.chroma = ((((p.dir * (SIZES[p.step] + p.alt)) % 12) + 12) %\r\n        12);\r\n    return Object.freeze(p);\r\n};\r\nvar cache = {};\r\nfunction props(str) {\r\n    if (typeof str !== \"string\")\r\n        return NO_IVL;\r\n    return cache[str] || (cache[str] = properties(str));\r\n}\r\nvar num = function (str) { return props(str).num; };\r\nvar name = function (str) { return props(str).name; };\r\nvar semitones = function (str) { return props(str).semitones; };\r\nvar chroma = function (str) { return props(str).chroma; };\r\nvar ic = function (ivl) {\r\n    if (typeof ivl === \"string\")\r\n        ivl = props(ivl).chroma;\r\n    return typeof ivl === \"number\" ? CLASSES[ivl % 12] : null;\r\n};\r\nvar build = function (_a) {\r\n    var _b = _a === void 0 ? {} : _a, num = _b.num, step = _b.step, alt = _b.alt, _c = _b.oct, oct = _c === void 0 ? 1 : _c, dir = _b.dir;\r\n    if (step !== undefined)\r\n        num = step + 1 + 7 * oct;\r\n    if (num === undefined)\r\n        return null;\r\n    if (typeof alt !== \"number\")\r\n        return null;\r\n    var d = typeof dir !== \"number\" ? \"\" : dir < 0 ? \"-\" : \"\";\r\n    var type = TYPES[numToStep(num)];\r\n    return (d + num + altToQ(type, alt));\r\n};\r\nvar simplify = function (str) {\r\n    var p = props(str);\r\n    if (p === NO_IVL)\r\n        return null;\r\n    var intervalProps = p;\r\n    return intervalProps.simple + intervalProps.q;\r\n};\r\nvar invert = function (str) {\r\n    var p = props(str);\r\n    if (p === NO_IVL)\r\n        return null;\r\n    var intervalProps = p;\r\n    var step = (7 - intervalProps.step) % 7;\r\n    var alt = intervalProps.type === \"P\" ? -intervalProps.alt : -(intervalProps.alt + 1);\r\n    return build({ step: step, alt: alt, oct: intervalProps.oct, dir: intervalProps.dir });\r\n};\r\nvar IN = [1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7];\r\nvar IQ = \"P m M m M P d P m M m M\".split(\" \");\r\nvar fromSemitones = function (num) {\r\n    var d = num < 0 ? -1 : 1;\r\n    var n = Math.abs(num);\r\n    var c = n % 12;\r\n    var o = Math.floor(n / 12);\r\n    return d * (IN[c] + 7 * o) + IQ[c];\r\n};\n\nexport { names, tokenize, qToAlt, altToQ, props, num, name, semitones, chroma, ic, build, simplify, invert, fromSemitones };\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-array.svg?style=flat-square)](https://www.npmjs.com/package/tonal-array)\n *\n * Tonal array utilities. Create ranges, sort notes, ...\n *\n * @example\n * import * as Array;\n * Array.sort([\"f\", \"a\", \"c\"]) // => [\"C\", \"F\", \"A\"]\n *\n * @example\n * const Array = require(\"tonal-array\")\n * Array.range(1, 4) // => [1, 2, 3, 4]\n *\n * @module Array\n */\nimport { props, name } from \"tonal-note\";\n\n// ascending range\nfunction ascR(b, n) {\n  for (var a = []; n--; a[n] = n + b){ ; }\n  return a;\n}\n// descending range\nfunction descR(b, n) {\n  for (var a = []; n--; a[n] = b - n){ ; }\n  return a;\n}\n\n/**\n * Create a numeric range\n *\n * @param {Number} from\n * @param {Number} to\n * @return {Array}\n *\n * @example\n * Array.range(-2, 2) // => [-2, -1, 0, 1, 2]\n * Array.range(2, -2) // => [2, 1, 0, -1, -2]\n */\nexport function range(a, b) {\n  return a === null || b === null\n    ? []\n    : a < b\n      ? ascR(a, b - a + 1)\n      : descR(a, a - b + 1);\n}\n/**\n *\n * Rotates a list a number of times. It\"s completly agnostic about the\n * contents of the list.\n *\n * @param {Integer} times - the number of rotations\n * @param {Array} array\n * @return {Array} the rotated array\n * @example\n * Array.rotate(1, [1, 2, 3]) // => [2, 3, 1]\n */\nexport function rotate(times, arr) {\n  var len = arr.length;\n  var n = ((times % len) + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\n\n/**\n * Return a copy of the array with the null values removed\n * @function\n * @param {Array} array\n * @return {Array}\n *\n * @example\n * Array.compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\n */\nexport var compact = function (arr) { return arr.filter(function (n) { return n === 0 || n; }); };\n\n// a function that get note heights (with negative number for pitch classes)\nvar height = function (name) {\n  var m = props(name).midi;\n  return m !== null ? m : props(name + \"-100\").midi;\n};\n\n/**\n * Sort an array of notes in ascending order\n *\n * @param {String|Array} notes\n * @return {Array} sorted array of notes\n */\nexport function sort(src) {\n  return compact(src.map(name)).sort(function (a, b) { return height(a) > height(b); });\n}\n\n/**\n * Get sorted notes with duplicates removed\n *\n * @function\n * @param {Array} notes\n */\nexport function unique(arr) {\n  return sort(arr).filter(function (n, i, a) { return i === 0 || n !== a[i - 1]; });\n}\n\n/**\n * Randomizes the order of the specified array in-place, using the FisherYates shuffle.\n *\n * @private\n * @function\n * @param {Array|String} arr - the array\n * @return {Array} the shuffled array\n *\n * @example\n * Array.shuffle([\"C\", \"D\", \"E\", \"F\"])\n */\nexport var shuffle = function (arr, rnd) {\n  if ( rnd === void 0 ) rnd = Math.random;\n\n  var i, t;\n  var m = arr.length;\n  while (m) {\n    i = (rnd() * m--) | 0;\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n};\n\n/**\n * Get all permutations of an array\n * http://stackoverflow.com/questions/9960908/permutations-in-javascript\n *\n * @param {Array} array - the array\n * @return {Array<Array>} an array with all the permutations\n */\nexport var permutations = function (arr) {\n  if (arr.length === 0) { return [[]]; }\n  return permutations(arr.slice(1)).reduce(function(acc, perm) {\n    return acc.concat(\n      arr.map(function(e, pos) {\n        var newPerm = perm.slice();\n        newPerm.splice(pos, 0, arr[0]);\n        return newPerm;\n      })\n    );\n  }, []);\n};\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-pcset.svg?style=flat-square)](https://www.npmjs.com/package/tonal-pcset)\n * [![tonal](https://img.shields.io/badge/tonal-pcset-yellow.svg?style=flat-square)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-pcset` is a collection of functions to work with pitch class sets, oriented\n * to make comparations (isEqual, isSubset, isSuperset)\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * You can install via npm: `npm i --save tonal-pcset`\n *\n * ```js\n * // es6\n * import PcSet from \"tonal-pcset\"\n * var PcSet = require(\"tonal-pcset\")\n *\n * PcSet.isEqual(\"c2 d5 e6\", \"c6 e3 d1\") // => true\n * ```\n *\n * ## API documentation\n *\n * @module PcSet\n */\nimport { chroma as notechr } from \"tonal-note\";\nimport { chroma as ivlchr } from \"tonal-interval\";\nimport { rotate, range, compact } from \"tonal-array\";\n\nvar chr = function (str) { return notechr(str) || ivlchr(str) || 0; };\nvar pcsetNum = function (set) { return parseInt(chroma(set), 2); };\nvar clen = function (chroma) { return chroma.replace(/0/g, \"\").length; };\n\n/**\n * Get chroma of a pitch class set. A chroma identifies each set uniquely.\n * It\"s a 12-digit binary each presenting one semitone of the octave.\n *\n * Note that this function accepts a chroma as parameter and return it\n * without modification.\n *\n * @param {Array|String} set - the pitch class set\n * @return {String} a binary representation of the pitch class set\n * @example\n * PcSet.chroma([\"C\", \"D\", \"E\"]) // => \"1010100000000\"\n */\nexport function chroma(set) {\n  if (isChroma(set)) { return set; }\n  if (!Array.isArray(set)) { return \"\"; }\n  var b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  set.map(chr).forEach(function (i) {\n    b[i] = 1;\n  });\n  return b.join(\"\");\n}\n\nvar all = null;\n/**\n * Get a list of all possible chromas (all possible scales)\n * More information: http://allthescales.org/\n * @return {Array} an array of possible chromas from '10000000000' to '11111111111'\n *\n */\nexport function chromas(n) {\n  all = all || range(2048, 4095).map(function (n) { return n.toString(2); });\n  return typeof n === \"number\"\n    ? all.filter(function (chroma) { return clen(chroma) === n; })\n    : all.slice();\n}\n\n/**\n * Given a a list of notes or a pcset chroma, produce the rotations\n * of the chroma discarding the ones that starts with \"0\"\n *\n * This is used, for example, to get all the modes of a scale.\n *\n * @param {Array|String} set - the list of notes or pitchChr of the set\n * @param {Boolean} normalize - (Optional, true by default) remove all\n * the rotations that starts with \"0\"\n * @return {Array<String>} an array with all the modes of the chroma\n *\n * @example\n * PcSet.modes([\"C\", \"D\", \"E\"]).map(PcSet.intervals)\n */\nexport function modes(set, normalize) {\n  normalize = normalize !== false;\n  var binary = chroma(set).split(\"\");\n  return compact(\n    binary.map(function(_, i) {\n      var r = rotate(i, binary);\n      return normalize && r[0] === \"0\" ? null : r.join(\"\");\n    })\n  );\n}\n\nvar REGEX = /^[01]{12}$/;\n/**\n * Test if the given string is a pitch class set chroma.\n * @param {String} chroma - the pitch class set chroma\n * @return {Boolean} true if its a valid pcset chroma\n * @example\n * PcSet.isChroma(\"101010101010\") // => true\n * PcSet.isChroma(\"101001\") // => false\n */\nexport function isChroma(set) {\n  return REGEX.test(set);\n}\n\nvar IVLS = \"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\".split(\" \");\n/**\n * Given a pcset (notes or chroma) return it\"s intervals\n * @param {String|Array} pcset - the pitch class set (notes or chroma)\n * @return {Array} intervals or empty array if not valid pcset\n * @example\n * PcSet.intervals(\"1010100000000\") => [\"1P\", \"2M\", \"3M\"]\n */\nexport function intervals(set) {\n  if (!isChroma(set)) { return []; }\n  return compact(\n    set.split(\"\").map(function(d, i) {\n      return d === \"1\" ? IVLS[i] : null;\n    })\n  );\n}\n\n/**\n * Test if two pitch class sets are identical\n *\n * @param {Array|String} set1 - one of the pitch class sets\n * @param {Array|String} set2 - the other pitch class set\n * @return {Boolean} true if they are equal\n * @example\n * PcSet.isEqual([\"c2\", \"d3\"], [\"c5\", \"d2\"]) // => true\n */\nexport function isEqual(s1, s2) {\n  if (arguments.length === 1) { return function (s) { return isEqual(s1, s); }; }\n  return chroma(s1) === chroma(s2);\n}\n\n/**\n * Create a function that test if a collection of notes is a\n * subset of a given set\n *\n * The function can be partially applied\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a subset of set, false otherwise\n * @example\n * const inCMajor = PcSet.isSubsetOf([\"C\", \"E\", \"G\"])\n * inCMajor([\"e6\", \"c4\"]) // => true\n * inCMajor([\"e6\", \"c4\", \"d3\"]) // => false\n */\nexport function isSubsetOf(set, notes) {\n  if (arguments.length > 1) { return isSubsetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes & set) === notes;\n  };\n}\n\n/**\n * Create a function that test if a collectio of notes is a\n * superset of a given set (it contains all notes and at least one more)\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a superset of set, false otherwise\n * @example\n * const extendsCMajor = PcSet.isSupersetOf([\"C\", \"E\", \"G\"])\n * extendsCMajor([\"e6\", \"a\", \"c4\", \"g2\"]) // => true\n * extendsCMajor([\"c6\", \"e4\", \"g3\"]) // => false\n */\nexport function isSupersetOf(set, notes) {\n  if (arguments.length > 1) { return isSupersetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes | set) === notes;\n  };\n}\n\n/**\n * Test if a given pitch class set includes a note\n * @param {Array|String} set - the base set to test against\n * @param {String|Pitch} note - the note to test\n * @return {Boolean} true if the note is included in the pcset\n * @example\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C4\") // => true\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C#4\") // => false\n */\nexport function includes(set, note) {\n  if (arguments.length > 1) { return includes(set)(note); }\n  set = chroma(set);\n  return function(note) {\n    return set[chr(note)] === \"1\";\n  };\n}\n\n/**\n * Filter a list with a pitch class set\n *\n * @param {Array|String} set - the pitch class set notes\n * @param {Array|String} notes - the note list to be filtered\n * @return {Array} the filtered notes\n *\n * @example\n * PcSet.filter([\"C\", \"D\", \"E\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"d2\", \"c3\", \"d3\" ])\n * PcSet.filter([\"C2\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"c3\" ])\n */\nexport function filter(set, notes) {\n  if (arguments.length === 1) { return function (n) { return filter(set, n); }; }\n  return notes.filter(includes(set));\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-dictionary.svg)](https://www.npmjs.com/package/tonal-dictionary)\n *\n * `tonal-dictionary` contains a dictionary of musical scales and chords\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * // es6\n * import * as Dictionary from \"tonal-dictionary\"\n * // es5\n * const Dictionary = require(\"tonal-dictionary\")\n *\n * @example\n * Dictionary.chord(\"Maj7\") // => [\"1P\", \"3M\", \"5P\", \"7M\"]\n *\n * @module Dictionary\n */\nimport sdata from \"./data/scales.json\";\nimport cdata from \"./data/chords.json\";\nimport { chroma } from \"tonal-pcset\";\n\nexport var dictionary = function (raw) {\n  var keys = Object.keys(raw).sort();\n  var data = [];\n  var index = [];\n\n  var add = function (name, ivls, chroma) {\n    data[name] = ivls;\n    index[chroma] = index[chroma] || [];\n    index[chroma].push(name);\n  };\n\n  keys.forEach(function (key) {\n    var ivls = raw[key][0].split(\" \");\n    var alias = raw[key][1];\n    var chr = chroma(ivls);\n\n    add(key, ivls, chr);\n    if (alias) { alias.forEach(function (a) { return add(a, ivls, chr); }); }\n  });\n  var allKeys = Object.keys(data).sort();\n\n  var dict = function (name) { return data[name]; };\n  dict.names = function (p) {\n    if (typeof p === \"string\") { return (index[p] || []).slice(); }\n    else { return (p === true ? allKeys : keys).slice(); }\n  };\n  return dict;\n};\n\nexport var combine = function (a, b) {\n  var dict = function (name) { return a(name) || b(name); };\n  dict.names = function (p) { return a.names(p).concat(b.names(p)); };\n  return dict;\n};\n\n/**\n * A dictionary of scales: a function that given a scale name (without tonic)\n * returns an array of intervals\n *\n * @function\n * @param {String} name\n * @return {Array} intervals\n * @example\n * import { scale } from \"tonal-dictionary\"\n * scale(\"major\") // => [\"1P\", \"2M\", ...]\n * scale.names(); // => [\"major\", ...]\n */\nexport var scale = dictionary(sdata);\n\n/**\n * A dictionary of chords: a function that given a chord type\n * returns an array of intervals\n *\n * @function\n * @param {String} type\n * @return {Array} intervals\n * @example\n * import { chord } from \"tonal-dictionary\"\n * chord(\"Maj7\") // => [\"1P\", \"3M\", ...]\n * chord.names(); // => [\"Maj3\", ...]\n */\nexport var chord = dictionary(cdata);\nexport var pcset = combine(scale, chord);\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-array.svg?style=flat-square)](https://www.npmjs.com/package/tonal-array)\n *\n * Tonal array utilities. Create ranges, sort notes, ...\n *\n * @example\n * import * as Array;\n * Array.sort([\"f\", \"a\", \"c\"]) // => [\"C\", \"F\", \"A\"]\n *\n * @example\n * const Array = require(\"tonal-array\")\n * Array.range(1, 4) // => [1, 2, 3, 4]\n *\n * @module Array\n */\nimport { props, name } from \"tonal-note\";\n\n// ascending range\nfunction ascR(b, n) {\n  for (var a = []; n--; a[n] = n + b){ ; }\n  return a;\n}\n// descending range\nfunction descR(b, n) {\n  for (var a = []; n--; a[n] = b - n){ ; }\n  return a;\n}\n\n/**\n * Create a numeric range\n *\n * @param {Number} from\n * @param {Number} to\n * @return {Array}\n *\n * @example\n * Array.range(-2, 2) // => [-2, -1, 0, 1, 2]\n * Array.range(2, -2) // => [2, 1, 0, -1, -2]\n */\nexport function range(a, b) {\n  return a === null || b === null\n    ? []\n    : a < b\n      ? ascR(a, b - a + 1)\n      : descR(a, a - b + 1);\n}\n/**\n *\n * Rotates a list a number of times. It\"s completly agnostic about the\n * contents of the list.\n *\n * @param {Integer} times - the number of rotations\n * @param {Array} array\n * @return {Array} the rotated array\n * @example\n * Array.rotate(1, [1, 2, 3]) // => [2, 3, 1]\n */\nexport function rotate(times, arr) {\n  var len = arr.length;\n  var n = ((times % len) + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\n\n/**\n * Return a copy of the array with the null values removed\n * @function\n * @param {Array} array\n * @return {Array}\n *\n * @example\n * Array.compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\n */\nexport var compact = function (arr) { return arr.filter(function (n) { return n === 0 || n; }); };\n\n// a function that get note heights (with negative number for pitch classes)\nvar height = function (name) {\n  var m = props(name).midi;\n  return m !== null ? m : props(name + \"-100\").midi;\n};\n\n/**\n * Sort an array of notes in ascending order\n *\n * @param {String|Array} notes\n * @return {Array} sorted array of notes\n */\nexport function sort(src) {\n  return compact(src.map(name)).sort(function (a, b) { return height(a) > height(b); });\n}\n\n/**\n * Get sorted notes with duplicates removed\n *\n * @function\n * @param {Array} notes\n */\nexport function unique(arr) {\n  return sort(arr).filter(function (n, i, a) { return i === 0 || n !== a[i - 1]; });\n}\n\n/**\n * Randomizes the order of the specified array in-place, using the FisherYates shuffle.\n *\n * @private\n * @function\n * @param {Array|String} arr - the array\n * @return {Array} the shuffled array\n *\n * @example\n * Array.shuffle([\"C\", \"D\", \"E\", \"F\"])\n */\nexport var shuffle = function (arr, rnd) {\n  if ( rnd === void 0 ) rnd = Math.random;\n\n  var i, t;\n  var m = arr.length;\n  while (m) {\n    i = (rnd() * m--) | 0;\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n};\n\n/**\n * Get all permutations of an array\n * http://stackoverflow.com/questions/9960908/permutations-in-javascript\n *\n * @param {Array} array - the array\n * @return {Array<Array>} an array with all the permutations\n */\nexport var permutations = function (arr) {\n  if (arr.length === 0) { return [[]]; }\n  return permutations(arr.slice(1)).reduce(function(acc, perm) {\n    return acc.concat(\n      arr.map(function(e, pos) {\n        var newPerm = perm.slice();\n        newPerm.splice(pos, 0, arr[0]);\n        return newPerm;\n      })\n    );\n  }, []);\n};\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-pcset.svg?style=flat-square)](https://www.npmjs.com/package/tonal-pcset)\n * [![tonal](https://img.shields.io/badge/tonal-pcset-yellow.svg?style=flat-square)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-pcset` is a collection of functions to work with pitch class sets, oriented\n * to make comparations (isEqual, isSubset, isSuperset)\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * You can install via npm: `npm i --save tonal-pcset`\n *\n * ```js\n * // es6\n * import PcSet from \"tonal-pcset\"\n * var PcSet = require(\"tonal-pcset\")\n *\n * PcSet.isEqual(\"c2 d5 e6\", \"c6 e3 d1\") // => true\n * ```\n *\n * ## API documentation\n *\n * @module PcSet\n */\nimport { chroma as notechr } from \"tonal-note\";\nimport { chroma as ivlchr } from \"tonal-interval\";\nimport { rotate, range, compact } from \"tonal-array\";\n\nvar chr = function (str) { return notechr(str) || ivlchr(str) || 0; };\nvar pcsetNum = function (set) { return parseInt(chroma(set), 2); };\nvar clen = function (chroma) { return chroma.replace(/0/g, \"\").length; };\n\n/**\n * Get chroma of a pitch class set. A chroma identifies each set uniquely.\n * It\"s a 12-digit binary each presenting one semitone of the octave.\n *\n * Note that this function accepts a chroma as parameter and return it\n * without modification.\n *\n * @param {Array|String} set - the pitch class set\n * @return {String} a binary representation of the pitch class set\n * @example\n * PcSet.chroma([\"C\", \"D\", \"E\"]) // => \"1010100000000\"\n */\nexport function chroma(set) {\n  if (isChroma(set)) { return set; }\n  if (!Array.isArray(set)) { return \"\"; }\n  var b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  set.map(chr).forEach(function (i) {\n    b[i] = 1;\n  });\n  return b.join(\"\");\n}\n\nvar all = null;\n/**\n * Get a list of all possible chromas (all possible scales)\n * More information: http://allthescales.org/\n * @return {Array} an array of possible chromas from '10000000000' to '11111111111'\n *\n */\nexport function chromas(n) {\n  all = all || range(2048, 4095).map(function (n) { return n.toString(2); });\n  return typeof n === \"number\"\n    ? all.filter(function (chroma) { return clen(chroma) === n; })\n    : all.slice();\n}\n\n/**\n * Given a a list of notes or a pcset chroma, produce the rotations\n * of the chroma discarding the ones that starts with \"0\"\n *\n * This is used, for example, to get all the modes of a scale.\n *\n * @param {Array|String} set - the list of notes or pitchChr of the set\n * @param {Boolean} normalize - (Optional, true by default) remove all\n * the rotations that starts with \"0\"\n * @return {Array<String>} an array with all the modes of the chroma\n *\n * @example\n * PcSet.modes([\"C\", \"D\", \"E\"]).map(PcSet.intervals)\n */\nexport function modes(set, normalize) {\n  normalize = normalize !== false;\n  var binary = chroma(set).split(\"\");\n  return compact(\n    binary.map(function(_, i) {\n      var r = rotate(i, binary);\n      return normalize && r[0] === \"0\" ? null : r.join(\"\");\n    })\n  );\n}\n\nvar REGEX = /^[01]{12}$/;\n/**\n * Test if the given string is a pitch class set chroma.\n * @param {String} chroma - the pitch class set chroma\n * @return {Boolean} true if its a valid pcset chroma\n * @example\n * PcSet.isChroma(\"101010101010\") // => true\n * PcSet.isChroma(\"101001\") // => false\n */\nexport function isChroma(set) {\n  return REGEX.test(set);\n}\n\nvar IVLS = \"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\".split(\" \");\n/**\n * Given a pcset (notes or chroma) return it\"s intervals\n * @param {String|Array} pcset - the pitch class set (notes or chroma)\n * @return {Array} intervals or empty array if not valid pcset\n * @example\n * PcSet.intervals(\"1010100000000\") => [\"1P\", \"2M\", \"3M\"]\n */\nexport function intervals(set) {\n  if (!isChroma(set)) { return []; }\n  return compact(\n    set.split(\"\").map(function(d, i) {\n      return d === \"1\" ? IVLS[i] : null;\n    })\n  );\n}\n\n/**\n * Test if two pitch class sets are identical\n *\n * @param {Array|String} set1 - one of the pitch class sets\n * @param {Array|String} set2 - the other pitch class set\n * @return {Boolean} true if they are equal\n * @example\n * PcSet.isEqual([\"c2\", \"d3\"], [\"c5\", \"d2\"]) // => true\n */\nexport function isEqual(s1, s2) {\n  if (arguments.length === 1) { return function (s) { return isEqual(s1, s); }; }\n  return chroma(s1) === chroma(s2);\n}\n\n/**\n * Create a function that test if a collection of notes is a\n * subset of a given set\n *\n * The function can be partially applied\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a subset of set, false otherwise\n * @example\n * const inCMajor = PcSet.isSubsetOf([\"C\", \"E\", \"G\"])\n * inCMajor([\"e6\", \"c4\"]) // => true\n * inCMajor([\"e6\", \"c4\", \"d3\"]) // => false\n */\nexport function isSubsetOf(set, notes) {\n  if (arguments.length > 1) { return isSubsetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes & set) === notes;\n  };\n}\n\n/**\n * Create a function that test if a collectio of notes is a\n * superset of a given set (it contains all notes and at least one more)\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a superset of set, false otherwise\n * @example\n * const extendsCMajor = PcSet.isSupersetOf([\"C\", \"E\", \"G\"])\n * extendsCMajor([\"e6\", \"a\", \"c4\", \"g2\"]) // => true\n * extendsCMajor([\"c6\", \"e4\", \"g3\"]) // => false\n */\nexport function isSupersetOf(set, notes) {\n  if (arguments.length > 1) { return isSupersetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes | set) === notes;\n  };\n}\n\n/**\n * Test if a given pitch class set includes a note\n * @param {Array|String} set - the base set to test against\n * @param {String|Pitch} note - the note to test\n * @return {Boolean} true if the note is included in the pcset\n * @example\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C4\") // => true\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C#4\") // => false\n */\nexport function includes(set, note) {\n  if (arguments.length > 1) { return includes(set)(note); }\n  set = chroma(set);\n  return function(note) {\n    return set[chr(note)] === \"1\";\n  };\n}\n\n/**\n * Filter a list with a pitch class set\n *\n * @param {Array|String} set - the pitch class set notes\n * @param {Array|String} notes - the note list to be filtered\n * @return {Array} the filtered notes\n *\n * @example\n * PcSet.filter([\"C\", \"D\", \"E\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"d2\", \"c3\", \"d3\" ])\n * PcSet.filter([\"C2\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"c3\" ])\n */\nexport function filter(set, notes) {\n  if (arguments.length === 1) { return function (n) { return filter(set, n); }; }\n  return notes.filter(includes(set));\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-detect.svg?style=flat-square)](https://www.npmjs.com/package/tonal-detect)\n *\n * Find chord and scale names from a collection of notes or pitch classes\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * import { chord } from \"tonal-detect\"\n * chord([\"C\", \"E\", \"G\", \"A\"]) // => [\"CM6\", \"Am7\"]\n *\n * @example\n * const Detect = require(\"tonal-detect\")\n * Detect.chord([\"C\", \"E\", \"G\", \"A\"]) // => [\"CM6\", \"Am7\"]\n *\n * @module Detect\n */\nimport { name, pc } from \"tonal-note\";\nimport * as Dictionary from \"tonal-dictionary\";\nimport { sort, compact } from \"tonal-array\";\nimport { modes } from \"tonal-pcset\";\n\nexport function detector(dictionary, defaultBuilder) {\n  defaultBuilder = defaultBuilder || ((tonic, names) => [tonic, names]);\n  return function(notes, builder) {\n    builder = builder || defaultBuilder;\n    notes = sort(notes.map(pc));\n    return modes(notes)\n      .map((mode, i) => {\n        const tonic = name(notes[i]);\n        const names = dictionary.names(mode);\n        return names.length ? builder(tonic, names) : null;\n      })\n      .filter(x => x);\n  };\n}\n\n/**\n * Given a collection of notes or pitch classes, try to find the chord name\n * @function\n * @param {Array<String>} notes\n * @return {Array<String>} chord names or empty array\n * @example\n * Detect.chord([\"C\", \"E\", \"G\", \"A\"]) // => [\"CM6\", \"Am7\"]\n */\nexport const chord = detector(\n  Dictionary.chord,\n  (tonic, names) => tonic + names[0]\n);\n\n/**\n * Given a collection of notes or pitch classes, try to find the scale names\n * @function\n * @param {Array<String>} notes\n * @return {Array<String>} scale names or empty array\n * @example\n * Detect.scale([\"f3\", \"a\", \"c5\", \"e2\", \"d\", \"g2\", \"b6\"]) // => [\n * \"C major\",\n * \"D dorian\",\n * \"E phrygian\",\n * \"F lydian\",\n * \"G mixolydian\",\n * \"A aeolian\",\n * \"B locrian\"\n * ]\n */\nexport const scale = detector(\n  Dictionary.scale,\n  (tonic, names) => tonic + \" \" + names[0]\n);\n\nexport const pcset = detector(Dictionary.pcset);\n","var NAMES = \"C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B\".split(\" \");\r\nvar names = function (accTypes) {\r\n    return typeof accTypes !== \"string\"\r\n        ? NAMES.slice()\r\n        : NAMES.filter(function (n) {\r\n            var acc = n[1] || \" \";\r\n            return accTypes.indexOf(acc) !== -1;\r\n        });\r\n};\r\nvar SHARPS = names(\" #\");\r\nvar FLATS = names(\" b\");\r\nvar REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\r\nfunction tokenize(str) {\r\n    if (typeof str !== \"string\")\r\n        str = \"\";\r\n    var m = REGEX.exec(str);\r\n    return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\r\n}\r\nvar NO_NOTE = Object.freeze({\r\n    pc: null,\r\n    name: null,\r\n    step: null,\r\n    alt: null,\r\n    oct: null,\r\n    octStr: null,\r\n    chroma: null,\r\n    midi: null,\r\n    freq: null\r\n});\r\nvar SEMI = [0, 2, 4, 5, 7, 9, 11];\r\nvar properties = function (str) {\r\n    var tokens = tokenize(str);\r\n    if (tokens[0] === \"\" || tokens[3] !== \"\")\r\n        return NO_NOTE;\r\n    var letter = tokens[0], acc = tokens[1], octStr = tokens[2];\r\n    var p = {\r\n        letter: letter,\r\n        acc: acc,\r\n        octStr: octStr,\r\n        pc: letter + acc,\r\n        name: letter + acc + octStr,\r\n        step: (letter.charCodeAt(0) + 3) % 7,\r\n        alt: acc[0] === \"b\" ? -acc.length : acc.length,\r\n        oct: octStr.length ? +octStr : null,\r\n        chroma: 0,\r\n        midi: null,\r\n        freq: null\r\n    };\r\n    p.chroma = (SEMI[p.step] + p.alt + 120) % 12;\r\n    p.midi = p.oct !== null ? SEMI[p.step] + p.alt + 12 * (p.oct + 1) : null;\r\n    p.freq = midiToFreq(p.midi);\r\n    return Object.freeze(p);\r\n};\r\nvar memo = function (fn, cache) {\r\n    if (cache === void 0) { cache = {}; }\r\n    return function (str) { return cache[str] || (cache[str] = fn(str)); };\r\n};\r\nvar props = memo(properties);\r\nvar name = function (str) { return props(str).name; };\r\nvar pc = function (str) { return props(str).pc; };\r\nvar isMidiRange = function (m) { return m >= 0 && m <= 127; };\r\nvar midi = function (note) {\r\n    if (typeof note !== \"number\" && typeof note !== \"string\") {\r\n        return null;\r\n    }\r\n    var midi = props(note).midi;\r\n    var value = midi || midi === 0 ? midi : +note;\r\n    return isMidiRange(value) ? value : null;\r\n};\r\nvar midiToFreq = function (midi, tuning) {\r\n    if (tuning === void 0) { tuning = 440; }\r\n    return typeof midi === \"number\" ? Math.pow(2, (midi - 69) / 12) * tuning : null;\r\n};\r\nvar freq = function (note) { return props(note).freq || midiToFreq(note); };\r\nvar L2 = Math.log(2);\r\nvar L440 = Math.log(440);\r\nvar freqToMidi = function (freq) {\r\n    var v = (12 * (Math.log(freq) - L440)) / L2 + 69;\r\n    return Math.round(v * 100) / 100;\r\n};\r\nvar chroma = function (str) { return props(str).chroma; };\r\nvar oct = function (str) { return props(str).oct; };\r\nvar LETTERS = \"CDEFGAB\";\r\nvar stepToLetter = function (step) { return LETTERS[step]; };\r\nvar fillStr = function (s, n) { return Array(n + 1).join(s); };\r\nvar numToStr = function (num, op) {\r\n    return typeof num !== \"number\" ? \"\" : op(num);\r\n};\r\nvar altToAcc = function (alt) {\r\n    return numToStr(alt, function (alt) { return (alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt)); });\r\n};\r\nvar from = function (fromProps, baseNote) {\r\n    if (fromProps === void 0) { fromProps = {}; }\r\n    if (baseNote === void 0) { baseNote = null; }\r\n    var _a = baseNote\r\n        ? Object.assign({}, props(baseNote), fromProps)\r\n        : fromProps, step = _a.step, alt = _a.alt, oct = _a.oct;\r\n    if (typeof step !== \"number\")\r\n        return null;\r\n    var letter = stepToLetter(step);\r\n    if (!letter)\r\n        return null;\r\n    var pc = letter + altToAcc(alt);\r\n    return oct || oct === 0 ? pc + oct : pc;\r\n};\r\nvar build = from;\r\nfunction fromMidi(num, sharps) {\r\n    if (sharps === void 0) { sharps = false; }\r\n    num = Math.round(num);\r\n    var pcs = sharps === true ? SHARPS : FLATS;\r\n    var pc = pcs[num % 12];\r\n    var o = Math.floor(num / 12) - 1;\r\n    return pc + o;\r\n}\r\nvar simplify = function (note, sameAcc) {\r\n    if (sameAcc === void 0) { sameAcc = true; }\r\n    var _a = props(note), alt = _a.alt, chroma = _a.chroma, midi = _a.midi;\r\n    if (chroma === null)\r\n        return null;\r\n    var alteration = alt;\r\n    var useSharps = sameAcc === false ? alteration < 0 : alteration > 0;\r\n    return midi === null\r\n        ? pc(fromMidi(chroma, useSharps))\r\n        : fromMidi(midi, useSharps);\r\n};\r\nvar enharmonic = function (note) { return simplify(note, false); };\n\nexport { names, tokenize, props, name, pc, midi, midiToFreq, freq, freqToMidi, chroma, oct, stepToLetter, altToAcc, from, build, fromMidi, simplify, enharmonic };\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-array.svg?style=flat-square)](https://www.npmjs.com/package/tonal-array)\n *\n * Tonal array utilities. Create ranges, sort notes, ...\n *\n * @example\n * import * as Array;\n * Array.sort([\"f\", \"a\", \"c\"]) // => [\"C\", \"F\", \"A\"]\n *\n * @example\n * const Array = require(\"tonal-array\")\n * Array.range(1, 4) // => [1, 2, 3, 4]\n *\n * @module Array\n */\nimport { props, name } from \"tonal-note\";\n\n// ascending range\nfunction ascR(b, n) {\n  for (var a = []; n--; a[n] = n + b){ ; }\n  return a;\n}\n// descending range\nfunction descR(b, n) {\n  for (var a = []; n--; a[n] = b - n){ ; }\n  return a;\n}\n\n/**\n * Create a numeric range\n *\n * @param {Number} from\n * @param {Number} to\n * @return {Array}\n *\n * @example\n * Array.range(-2, 2) // => [-2, -1, 0, 1, 2]\n * Array.range(2, -2) // => [2, 1, 0, -1, -2]\n */\nexport function range(a, b) {\n  return a === null || b === null\n    ? []\n    : a < b\n      ? ascR(a, b - a + 1)\n      : descR(a, a - b + 1);\n}\n/**\n *\n * Rotates a list a number of times. It\"s completly agnostic about the\n * contents of the list.\n *\n * @param {Integer} times - the number of rotations\n * @param {Array} array\n * @return {Array} the rotated array\n * @example\n * Array.rotate(1, [1, 2, 3]) // => [2, 3, 1]\n */\nexport function rotate(times, arr) {\n  var len = arr.length;\n  var n = ((times % len) + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\n\n/**\n * Return a copy of the array with the null values removed\n * @function\n * @param {Array} array\n * @return {Array}\n *\n * @example\n * Array.compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\n */\nexport var compact = function (arr) { return arr.filter(function (n) { return n === 0 || n; }); };\n\n// a function that get note heights (with negative number for pitch classes)\nvar height = function (name) {\n  var m = props(name).midi;\n  return m !== null ? m : props(name + \"-100\").midi;\n};\n\n/**\n * Sort an array of notes in ascending order\n *\n * @param {String|Array} notes\n * @return {Array} sorted array of notes\n */\nexport function sort(src) {\n  return compact(src.map(name)).sort(function (a, b) { return height(a) > height(b); });\n}\n\n/**\n * Get sorted notes with duplicates removed\n *\n * @function\n * @param {Array} notes\n */\nexport function unique(arr) {\n  return sort(arr).filter(function (n, i, a) { return i === 0 || n !== a[i - 1]; });\n}\n\n/**\n * Randomizes the order of the specified array in-place, using the FisherYates shuffle.\n *\n * @private\n * @function\n * @param {Array|String} arr - the array\n * @return {Array} the shuffled array\n *\n * @example\n * Array.shuffle([\"C\", \"D\", \"E\", \"F\"])\n */\nexport var shuffle = function (arr, rnd) {\n  if ( rnd === void 0 ) rnd = Math.random;\n\n  var i, t;\n  var m = arr.length;\n  while (m) {\n    i = (rnd() * m--) | 0;\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n};\n\n/**\n * Get all permutations of an array\n * http://stackoverflow.com/questions/9960908/permutations-in-javascript\n *\n * @param {Array} array - the array\n * @return {Array<Array>} an array with all the permutations\n */\nexport var permutations = function (arr) {\n  if (arr.length === 0) { return [[]]; }\n  return permutations(arr.slice(1)).reduce(function(acc, perm) {\n    return acc.concat(\n      arr.map(function(e, pos) {\n        var newPerm = perm.slice();\n        newPerm.splice(pos, 0, arr[0]);\n        return newPerm;\n      })\n    );\n  }, []);\n};\n","var IVL_TNL = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\r\nvar IVL_STR = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\r\nvar REGEX = new RegExp(\"^\" + IVL_TNL + \"|\" + IVL_STR + \"$\");\r\nvar SIZES = [0, 2, 4, 5, 7, 9, 11];\r\nvar TYPES = \"PMMPPMM\";\r\nvar CLASSES = [0, 1, 2, 3, 4, 5, 6, 5, 4, 3, 2, 1];\r\nvar NAMES = \"1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P\".split(\" \");\r\nvar names = function (types) {\r\n    return typeof types !== \"string\"\r\n        ? NAMES.slice()\r\n        : NAMES.filter(function (n) { return types.indexOf(n[1]) !== -1; });\r\n};\r\nvar tokenize = function (str) {\r\n    var m = REGEX.exec(\"\" + str);\r\n    if (m === null)\r\n        return null;\r\n    return (m[1] ? [m[1], m[2]] : [m[4], m[3]]);\r\n};\r\nvar NO_IVL = Object.freeze({\r\n    name: null,\r\n    num: null,\r\n    q: null,\r\n    step: null,\r\n    alt: null,\r\n    dir: null,\r\n    type: null,\r\n    simple: null,\r\n    semitones: null,\r\n    chroma: null,\r\n    oct: null\r\n});\r\nvar fillStr = function (s, n) { return Array(Math.abs(n) + 1).join(s); };\r\nvar qToAlt = function (type, q) {\r\n    if (q === \"M\" && type === \"M\")\r\n        return 0;\r\n    if (q === \"P\" && type === \"P\")\r\n        return 0;\r\n    if (q === \"m\" && type === \"M\")\r\n        return -1;\r\n    if (/^A+$/.test(q))\r\n        return q.length;\r\n    if (/^d+$/.test(q))\r\n        return type === \"P\" ? -q.length : -q.length - 1;\r\n    return null;\r\n};\r\nvar altToQ = function (type, alt) {\r\n    if (alt === 0)\r\n        return type === \"M\" ? \"M\" : \"P\";\r\n    else if (alt === -1 && type === \"M\")\r\n        return \"m\";\r\n    else if (alt > 0)\r\n        return fillStr(\"A\", alt);\r\n    else if (alt < 0)\r\n        return fillStr(\"d\", type === \"P\" ? alt : alt + 1);\r\n    else\r\n        return null;\r\n};\r\nvar numToStep = function (num) { return (Math.abs(num) - 1) % 7; };\r\nvar properties = function (str) {\r\n    var t = tokenize(str);\r\n    if (t === null)\r\n        return NO_IVL;\r\n    var p = {\r\n        num: 0,\r\n        q: \"d\",\r\n        name: \"\",\r\n        type: \"M\",\r\n        step: 0,\r\n        dir: -1,\r\n        simple: 1,\r\n        alt: 0,\r\n        oct: 0,\r\n        semitones: 0,\r\n        chroma: 0,\r\n        ic: 0\r\n    };\r\n    p.num = +t[0];\r\n    p.q = t[1];\r\n    p.step = numToStep(p.num);\r\n    p.type = TYPES[p.step];\r\n    if (p.type === \"M\" && p.q === \"P\")\r\n        return NO_IVL;\r\n    p.name = \"\" + p.num + p.q;\r\n    p.dir = p.num < 0 ? -1 : 1;\r\n    p.simple = (p.num === 8 || p.num === -8\r\n        ? p.num\r\n        : p.dir * (p.step + 1));\r\n    p.alt = qToAlt(p.type, p.q);\r\n    p.oct = Math.floor((Math.abs(p.num) - 1) / 7);\r\n    p.semitones = p.dir * (SIZES[p.step] + p.alt + 12 * p.oct);\r\n    p.chroma = ((((p.dir * (SIZES[p.step] + p.alt)) % 12) + 12) %\r\n        12);\r\n    return Object.freeze(p);\r\n};\r\nvar cache = {};\r\nfunction props(str) {\r\n    if (typeof str !== \"string\")\r\n        return NO_IVL;\r\n    return cache[str] || (cache[str] = properties(str));\r\n}\r\nvar num = function (str) { return props(str).num; };\r\nvar name = function (str) { return props(str).name; };\r\nvar semitones = function (str) { return props(str).semitones; };\r\nvar chroma = function (str) { return props(str).chroma; };\r\nvar ic = function (ivl) {\r\n    if (typeof ivl === \"string\")\r\n        ivl = props(ivl).chroma;\r\n    return typeof ivl === \"number\" ? CLASSES[ivl % 12] : null;\r\n};\r\nvar build = function (_a) {\r\n    var _b = _a === void 0 ? {} : _a, num = _b.num, step = _b.step, alt = _b.alt, _c = _b.oct, oct = _c === void 0 ? 1 : _c, dir = _b.dir;\r\n    if (step !== undefined)\r\n        num = step + 1 + 7 * oct;\r\n    if (num === undefined)\r\n        return null;\r\n    if (typeof alt !== \"number\")\r\n        return null;\r\n    var d = typeof dir !== \"number\" ? \"\" : dir < 0 ? \"-\" : \"\";\r\n    var type = TYPES[numToStep(num)];\r\n    return (d + num + altToQ(type, alt));\r\n};\r\nvar simplify = function (str) {\r\n    var p = props(str);\r\n    if (p === NO_IVL)\r\n        return null;\r\n    var intervalProps = p;\r\n    return intervalProps.simple + intervalProps.q;\r\n};\r\nvar invert = function (str) {\r\n    var p = props(str);\r\n    if (p === NO_IVL)\r\n        return null;\r\n    var intervalProps = p;\r\n    var step = (7 - intervalProps.step) % 7;\r\n    var alt = intervalProps.type === \"P\" ? -intervalProps.alt : -(intervalProps.alt + 1);\r\n    return build({ step: step, alt: alt, oct: intervalProps.oct, dir: intervalProps.dir });\r\n};\r\nvar IN = [1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7];\r\nvar IQ = \"P m M m M P d P m M m M\".split(\" \");\r\nvar fromSemitones = function (num) {\r\n    var d = num < 0 ? -1 : 1;\r\n    var n = Math.abs(num);\r\n    var c = n % 12;\r\n    var o = Math.floor(n / 12);\r\n    return d * (IN[c] + 7 * o) + IQ[c];\r\n};\n\nexport { names, tokenize, qToAlt, altToQ, props, num, name, semitones, chroma, ic, build, simplify, invert, fromSemitones };\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-distance.svg)](https://www.npmjs.com/package/tonal-distance)\n * [![tonal](https://img.shields.io/badge/tonal-distance-yellow.svg)](https://github.com/danigb/tonal/tree/master/packages/tonal/distance)\n *\n * Transpose notes by intervals and find distances between notes\n *\n * @example\n * // es6\n * import * as Distance from \"tonal-distance\"\n * Distance.interval(\"C3\", \"C4\") // => \"1P\"\n *\n * @example\n * // es6 import selected functions\n * import { interval, semitones, transpose } from \"tonal-distance\"\n *\n * semitones(\"C\" ,\"D\") // => 2\n * interval(\"C4\", \"G4\") // => \"5P\"\n * transpose(\"C4\", \"P5\") // => \"G4\"\n *\n * @example\n * // included in tonal facade\n * const Tonal = require(\"tonal\");\n * Tonal.Distance.transpose(\"C4\", \"P5\")\n * Tonal.Distance.transposeBy(\"P5\", \"C4\")\n *\n * @module Distance\n */\nimport { props as noteProps, build as fromNote } from \"tonal-note\";\nimport { props as iprops, build as ibuild } from \"tonal-interval\";\n\n// Map from letter step to number of fifths starting from \"C\":\n// { C: 0, D: 2, E: 4, F: -1, G: 1, A: 3, B: 5 }\nvar FIFTHS = [0, 2, 4, -1, 1, 3, 5];\n\n// Given a number of fifths, return the octaves they span\nvar fOcts = function (f) { return Math.floor((f * 7) / 12); };\n\n// Get the number of octaves it span each step\nvar FIFTH_OCTS = FIFTHS.map(fOcts);\n\nvar encode = function (ref) {\n  var step = ref.step;\n  var alt = ref.alt;\n  var oct = ref.oct;\n  var dir = ref.dir; if ( dir === void 0 ) dir = 1;\n\n  var f = FIFTHS[step] + 7 * alt;\n  if (oct === null) { return [dir * f]; }\n  var o = oct - FIFTH_OCTS[step] - 4 * alt;\n  return [dir * f, dir * o];\n};\n\n// We need to get the steps from fifths\n// Fifths for CDEFGAB are [ 0, 2, 4, -1, 1, 3, 5 ]\n// We add 1 to fifths to avoid negative numbers, so:\n// for [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\", \"B\"] we have:\nvar STEPS = [3, 0, 4, 1, 5, 2, 6];\n\n// Return the number of fifths as if it were unaltered\nfunction unaltered(f) {\n  var i = (f + 1) % 7;\n  return i < 0 ? 7 + i : i;\n}\n\nvar decode = function (f, o, dir) {\n  var step = STEPS[unaltered(f)];\n  var alt = Math.floor((f + 1) / 7);\n  if (o === undefined) { return { step: step, alt: alt, dir: dir }; }\n  var oct = o + 4 * alt + FIFTH_OCTS[step];\n  return { step: step, alt: alt, oct: oct, dir: dir };\n};\n\nvar memo = function (fn, cache) {\n  if ( cache === void 0 ) cache = {};\n\n  return function (str) { return cache[str] || (cache[str] = fn(str)); };\n};\n\nvar encoder = function (props) { return memo(function (str) {\n    var p = props(str);\n    return p.name === null ? null : encode(p);\n  }); };\n\nvar encodeNote = encoder(noteProps);\nvar encodeIvl = encoder(iprops);\n\n/**\n * Transpose a note by an interval. The note can be a pitch class.\n *\n * This function can be partially applied.\n *\n * @param {String} note\n * @param {String} interval\n * @return {String} the transposed note\n * @example\n * import { tranpose } from \"tonal-distance\"\n * transpose(\"d3\", \"3M\") // => \"F#3\"\n * // it works with pitch classes\n * transpose(\"D\", \"3M\") // => \"F#\"\n * // can be partially applied\n * [\"C\", \"D\", \"E\", \"F\", \"G\"].map(transpose(\"M3)) // => [\"E\", \"F#\", \"G#\", \"A\", \"B\"]\n */\nexport function transpose(note, interval) {\n  if (arguments.length === 1) { return function (i) { return transpose(note, i); }; }\n  var n = encodeNote(note);\n  var i = encodeIvl(interval);\n  if (n === null || i === null) { return null; }\n  var tr = n.length === 1 ? [n[0] + i[0]] : [n[0] + i[0], n[1] + i[1]];\n  return fromNote(decode(tr[0], tr[1]));\n}\n\n/**\n * Transpose a pitch class by a number of perfect fifths.\n *\n * It can be partially applied.\n *\n * @function\n * @param {String} pitchClass - the pitch class\n * @param {Integer} fifhts - the number of fifths\n * @return {String} the transposed pitch class\n *\n * @example\n * import { trFifths } from \"tonal-transpose\"\n * [0, 1, 2, 3, 4].map(trFifths(\"C\")) // => [\"C\", \"G\", \"D\", \"A\", \"E\"]\n * // or using tonal\n * Distance.trFifths(\"G4\", 1) // => \"D\"\n */\n\nexport function trFifths(note, fifths) {\n  if (arguments.length === 1) { return function (f) { return trFifths(note, f); }; }\n  var n = encodeNote(note);\n  if (n === null) { return null; }\n  return fromNote(decode(n[0] + fifths));\n}\n\n/**\n * Get the distance in fifths between pitch classes\n *\n * Can be partially applied.\n *\n * @param {String} to - note or pitch class\n * @param {String} from - note or pitch class\n */\nexport function fifths(from, to) {\n  if (arguments.length === 1) { return function (to) { return fifths(from, to); }; }\n  var f = encodeNote(from);\n  var t = encodeNote(to);\n  if (t === null || f === null) { return null; }\n  return t[0] - f[0];\n}\n\n/**\n * The same as transpose with the arguments inverted.\n *\n * Can be partially applied.\n *\n * @param {String} note\n * @param {String} interval\n * @return {String} the transposed note\n * @example\n * import { tranposeBy } from \"tonal-distance\"\n * transposeBy(\"3m\", \"5P\") // => \"7m\"\n */\nexport function transposeBy(interval, note) {\n  if (arguments.length === 1) { return function (n) { return transpose(n, interval); }; }\n  return transpose(note, interval);\n}\n\nvar isDescending = function (e) { return e[0] * 7 + e[1] * 12 < 0; };\nvar decodeIvl = function (i) { return isDescending(i) ? decode(-i[0], -i[1], -1) : decode(i[0], i[1], 1); };\n\nexport function addIntervals(ivl1, ivl2, dir) {\n  var i1 = encodeIvl(ivl1);\n  var i2 = encodeIvl(ivl2);\n  if (i1 === null || i2 === null) { return null; }\n  var i = [i1[0] + dir * i2[0], i1[1] + dir * i2[1]];\n  return ibuild(decodeIvl(i));\n}\n\n/**\n * Add two intervals\n *\n * Can be partially applied.\n *\n * @param {String} interval1\n * @param {String} interval2\n * @return {String} the resulting interval\n * @example\n * import { add } from \"tonal-distance\"\n * add(\"3m\", \"5P\") // => \"7m\"\n */\nexport function add(ivl1, ivl2) {\n  if (arguments.length === 1) { return function (i2) { return add(ivl1, i2); }; }\n  return addIntervals(ivl1, ivl2, 1);\n}\n\n/**\n * Subtract two intervals\n *\n * Can be partially applied\n *\n * @param {String} minuend\n * @param {String} subtrahend\n * @return {String} interval diference\n */\nexport function subtract(ivl1, ivl2) {\n  if (arguments.length === 1) { return function (i2) { return add(ivl1, i2); }; }\n  return addIntervals(ivl1, ivl2, -1);\n}\n\n/**\n * Find the interval between two pitches. It works with pitch classes\n * (both must be pitch classes and the interval is always ascending)\n *\n * Can be partially applied\n *\n * @param {String} from - distance from\n * @param {String} to - distance to\n * @return {String} the interval distance\n *\n * @example\n * import { interval } from \"tonal-distance\"\n * interval(\"C2\", \"C3\") // => \"P8\"\n * interval(\"G\", \"B\") // => \"M3\"\n *\n * @example\n * import * as Distance from \"tonal-distance\"\n * Distance.interval(\"M2\", \"P5\") // => \"P4\"\n */\nexport function interval(from, to) {\n  if (arguments.length === 1) { return function (t) { return interval(from, t); }; }\n  var f = encodeNote(from);\n  var t = encodeNote(to);\n  if (f === null || t === null || f.length !== t.length) { return null; }\n  var d =\n    f.length === 1\n      ? [t[0] - f[0], -Math.floor(((t[0] - f[0]) * 7) / 12)]\n      : [t[0] - f[0], t[1] - f[1]];\n  return ibuild(decodeIvl(d));\n}\n\n/**\n * Get the distance between two notes in semitones\n *\n * @param {String|Pitch} from - first note\n * @param {String|Pitch} to - last note\n * @return {Integer} the distance in semitones or null if not valid notes\n * @example\n * import { semitones } from \"tonal-distance\"\n * semitones(\"C3\", \"A2\") // => -3\n * // or use tonal\n * Tonal.Distance.semitones(\"C3\", \"G3\") // => 7\n */\nexport function semitones(from, to) {\n  if (arguments.length === 1) { return function (t) { return semitones(from, t); }; }\n  var f = noteProps(from);\n  var t = noteProps(to);\n  return f.midi !== null && t.midi !== null\n    ? t.midi - f.midi\n    : f.chroma !== null && t.chroma !== null\n      ? (t.chroma - f.chroma + 12) % 12\n      : null;\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-pcset.svg?style=flat-square)](https://www.npmjs.com/package/tonal-pcset)\n * [![tonal](https://img.shields.io/badge/tonal-pcset-yellow.svg?style=flat-square)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-pcset` is a collection of functions to work with pitch class sets, oriented\n * to make comparations (isEqual, isSubset, isSuperset)\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * You can install via npm: `npm i --save tonal-pcset`\n *\n * ```js\n * // es6\n * import PcSet from \"tonal-pcset\"\n * var PcSet = require(\"tonal-pcset\")\n *\n * PcSet.isEqual(\"c2 d5 e6\", \"c6 e3 d1\") // => true\n * ```\n *\n * ## API documentation\n *\n * @module PcSet\n */\nimport { chroma as notechr } from \"tonal-note\";\nimport { chroma as ivlchr } from \"tonal-interval\";\nimport { rotate, range, compact } from \"tonal-array\";\n\nvar chr = function (str) { return notechr(str) || ivlchr(str) || 0; };\nvar pcsetNum = function (set) { return parseInt(chroma(set), 2); };\nvar clen = function (chroma) { return chroma.replace(/0/g, \"\").length; };\n\n/**\n * Get chroma of a pitch class set. A chroma identifies each set uniquely.\n * It\"s a 12-digit binary each presenting one semitone of the octave.\n *\n * Note that this function accepts a chroma as parameter and return it\n * without modification.\n *\n * @param {Array|String} set - the pitch class set\n * @return {String} a binary representation of the pitch class set\n * @example\n * PcSet.chroma([\"C\", \"D\", \"E\"]) // => \"1010100000000\"\n */\nexport function chroma(set) {\n  if (isChroma(set)) { return set; }\n  if (!Array.isArray(set)) { return \"\"; }\n  var b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  set.map(chr).forEach(function (i) {\n    b[i] = 1;\n  });\n  return b.join(\"\");\n}\n\nvar all = null;\n/**\n * Get a list of all possible chromas (all possible scales)\n * More information: http://allthescales.org/\n * @return {Array} an array of possible chromas from '10000000000' to '11111111111'\n *\n */\nexport function chromas(n) {\n  all = all || range(2048, 4095).map(function (n) { return n.toString(2); });\n  return typeof n === \"number\"\n    ? all.filter(function (chroma) { return clen(chroma) === n; })\n    : all.slice();\n}\n\n/**\n * Given a a list of notes or a pcset chroma, produce the rotations\n * of the chroma discarding the ones that starts with \"0\"\n *\n * This is used, for example, to get all the modes of a scale.\n *\n * @param {Array|String} set - the list of notes or pitchChr of the set\n * @param {Boolean} normalize - (Optional, true by default) remove all\n * the rotations that starts with \"0\"\n * @return {Array<String>} an array with all the modes of the chroma\n *\n * @example\n * PcSet.modes([\"C\", \"D\", \"E\"]).map(PcSet.intervals)\n */\nexport function modes(set, normalize) {\n  normalize = normalize !== false;\n  var binary = chroma(set).split(\"\");\n  return compact(\n    binary.map(function(_, i) {\n      var r = rotate(i, binary);\n      return normalize && r[0] === \"0\" ? null : r.join(\"\");\n    })\n  );\n}\n\nvar REGEX = /^[01]{12}$/;\n/**\n * Test if the given string is a pitch class set chroma.\n * @param {String} chroma - the pitch class set chroma\n * @return {Boolean} true if its a valid pcset chroma\n * @example\n * PcSet.isChroma(\"101010101010\") // => true\n * PcSet.isChroma(\"101001\") // => false\n */\nexport function isChroma(set) {\n  return REGEX.test(set);\n}\n\nvar IVLS = \"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\".split(\" \");\n/**\n * Given a pcset (notes or chroma) return it\"s intervals\n * @param {String|Array} pcset - the pitch class set (notes or chroma)\n * @return {Array} intervals or empty array if not valid pcset\n * @example\n * PcSet.intervals(\"1010100000000\") => [\"1P\", \"2M\", \"3M\"]\n */\nexport function intervals(set) {\n  if (!isChroma(set)) { return []; }\n  return compact(\n    set.split(\"\").map(function(d, i) {\n      return d === \"1\" ? IVLS[i] : null;\n    })\n  );\n}\n\n/**\n * Test if two pitch class sets are identical\n *\n * @param {Array|String} set1 - one of the pitch class sets\n * @param {Array|String} set2 - the other pitch class set\n * @return {Boolean} true if they are equal\n * @example\n * PcSet.isEqual([\"c2\", \"d3\"], [\"c5\", \"d2\"]) // => true\n */\nexport function isEqual(s1, s2) {\n  if (arguments.length === 1) { return function (s) { return isEqual(s1, s); }; }\n  return chroma(s1) === chroma(s2);\n}\n\n/**\n * Create a function that test if a collection of notes is a\n * subset of a given set\n *\n * The function can be partially applied\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a subset of set, false otherwise\n * @example\n * const inCMajor = PcSet.isSubsetOf([\"C\", \"E\", \"G\"])\n * inCMajor([\"e6\", \"c4\"]) // => true\n * inCMajor([\"e6\", \"c4\", \"d3\"]) // => false\n */\nexport function isSubsetOf(set, notes) {\n  if (arguments.length > 1) { return isSubsetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes & set) === notes;\n  };\n}\n\n/**\n * Create a function that test if a collectio of notes is a\n * superset of a given set (it contains all notes and at least one more)\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a superset of set, false otherwise\n * @example\n * const extendsCMajor = PcSet.isSupersetOf([\"C\", \"E\", \"G\"])\n * extendsCMajor([\"e6\", \"a\", \"c4\", \"g2\"]) // => true\n * extendsCMajor([\"c6\", \"e4\", \"g3\"]) // => false\n */\nexport function isSupersetOf(set, notes) {\n  if (arguments.length > 1) { return isSupersetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes | set) === notes;\n  };\n}\n\n/**\n * Test if a given pitch class set includes a note\n * @param {Array|String} set - the base set to test against\n * @param {String|Pitch} note - the note to test\n * @return {Boolean} true if the note is included in the pcset\n * @example\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C4\") // => true\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C#4\") // => false\n */\nexport function includes(set, note) {\n  if (arguments.length > 1) { return includes(set)(note); }\n  set = chroma(set);\n  return function(note) {\n    return set[chr(note)] === \"1\";\n  };\n}\n\n/**\n * Filter a list with a pitch class set\n *\n * @param {Array|String} set - the pitch class set notes\n * @param {Array|String} notes - the note list to be filtered\n * @return {Array} the filtered notes\n *\n * @example\n * PcSet.filter([\"C\", \"D\", \"E\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"d2\", \"c3\", \"d3\" ])\n * PcSet.filter([\"C2\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"c3\" ])\n */\nexport function filter(set, notes) {\n  if (arguments.length === 1) { return function (n) { return filter(set, n); }; }\n  return notes.filter(includes(set));\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-scale.svg?style=flat-square)](https://www.npmjs.com/package/tonal-scale)\n *\n * A scale is a collection of pitches in ascending or descending order.\n *\n * This module provides functions to get and manipulate scales.\n *\n * @example\n * // es6\n * import * as Scale from \"tonal-scale\"\n * // es5\n * const Scale = require(\"tonal-scale\");\n *\n * @example\n * Scale.notes(\"Ab bebop\") // => [ \"Ab\", \"Bb\", \"C\", \"Db\", \"Eb\", \"F\", \"Gb\", \"G\" ]\n * Scale.names() => [\"major\", \"minor\", ...]\n * @module Scale\n */\nimport { name as noteName, pc } from \"tonal-note\";\nimport {\n  modes as pcsetModes,\n  chroma,\n  isSubsetOf,\n  isSupersetOf\n} from \"tonal-pcset\";\nimport { transpose } from \"tonal-distance\";\nimport { scale, chord } from \"tonal-dictionary\";\nimport { compact, unique, rotate } from \"tonal-array\";\n\nvar NO_SCALE = Object.freeze({\n  name: null,\n  intervals: [],\n  names: [],\n  chroma: null,\n  setnum: null\n});\n\nvar properties = function (name) {\n  var intervals = scale(name);\n  if (!intervals) { return NO_SCALE; }\n  var s = { intervals: intervals, name: name };\n  s.chroma = chroma(intervals);\n  s.setnum = parseInt(s.chroma, 2);\n  s.names = scale.names(s.chroma);\n  return Object.freeze(s);\n};\n\nvar memoize = function (fn, cache) { return function (str) { return cache[str] || (cache[str] = fn(str)); }; };\n\n/**\n * Get scale properties. It returns an object with:\n * - name: the scale name\n * - names: a list with all possible names (includes the current)\n * - intervals: an array with the scale intervals\n * - chroma:  scale croma (see pcset)\n * - setnum: scale chroma number\n *\n * @function\n * @param {String} name - the scale name (without tonic)\n * @return {Object}\n */\nexport var props = memoize(properties, {});\n\n/**\n * Return the available scale names\n *\n * @function\n * @param {boolean} aliases - true to include aliases\n * @return {Array} the scale names\n *\n * @example\n * Scale.names() // => [\"maj7\", ...]\n */\nexport var names = scale.names;\n\n/**\n * Given a scale name, return its intervals. The name can be the type and\n * optionally the tonic (which is ignored)\n *\n * It retruns an empty array when no scale found\n *\n * @function\n * @param {String} name - the scale name (tonic and type, tonic is optional)\n * @return {Array<String>} the scale intervals if is a known scale or an empty\n * array if no scale found\n * @example\n * Scale.intervals(\"major\") // => [ \"1P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\" ]\n */\nexport var intervals = function (name) {\n  var p = tokenize(name);\n  return props(p[1]).intervals;\n};\n\n/**\n * Get the notes (pitch classes) of a scale.\n *\n * Note that it always returns an array, and the values are only pitch classes.\n *\n * @function\n * @param {String} tonic\n * @param {String} nameOrTonic - the scale name or tonic (if 2nd param)\n * @param {String} [name] - the scale name without tonic\n * @return {Array} a pitch classes array\n *\n * @example\n * Scale.notes(\"C\", \"major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"C major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"C4\", \"major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"A4\", \"no-scale\") // => []\n * Scale.notes(\"blah\", \"major\") // => []\n */\nexport function notes(nameOrTonic, name) {\n  var p = tokenize(nameOrTonic);\n  name = name || p[1];\n  return intervals(name).map(transpose(p[0]));\n}\n\n/**\n * Check if the given name is a known scale from the scales dictionary\n *\n * @function\n * @param {String} name - the scale name\n * @return {Boolean}\n */\nexport function exists(name) {\n  var p = tokenize(name);\n  return scale(p[1]) !== undefined;\n}\n\n/**\n * Given a string with a scale name and (optionally) a tonic, split\n * that components.\n *\n * It retuns an array with the form [ name, tonic ] where tonic can be a\n * note name or null and name can be any arbitrary string\n * (this function doesn\"t check if that scale name exists)\n *\n * @function\n * @param {String} name - the scale name\n * @return {Array} an array [tonic, name]\n * @example\n * Scale.tokenize(\"C mixolydean\") // => [\"C\", \"mixolydean\"]\n * Scale.tokenize(\"anything is valid\") // => [\"\", \"anything is valid\"]\n * Scale.tokenize() // => [\"\", \"\"]\n */\nexport function tokenize(str) {\n  if (typeof str !== \"string\") { return [\"\", \"\"]; }\n  var i = str.indexOf(\" \");\n  var tonic = noteName(str.substring(0, i)) || noteName(str) || \"\";\n  var name = tonic !== \"\" ? str.substring(tonic.length + 1) : str;\n  return [tonic, name.length ? name : \"\"];\n}\n\n/**\n * Find mode names of a scale\n *\n * @function\n * @param {String} name - scale name\n */\nexport var modeNames = function (name) {\n  var ivls = intervals(name);\n  var tonics = notes(name);\n\n  return pcsetModes(ivls)\n    .map(function (chroma, i) {\n      var name = scale.names(chroma)[0];\n      if (name) { return [tonics[i] || ivls[i], name]; }\n    })\n    .filter(function (x) { return x; });\n};\n\n/**\n * Get all chords that fits a given scale\n *\n * @function\n * @param {String} name\n */\nexport var chords = function (name) {\n  var inScale = isSubsetOf(intervals(name));\n  return chord.names().filter(function (name) { return inScale(chord(name)); });\n};\n\n/**\n * Given an array of notes, return the scale: a pitch class set starting from\n * the first note of the array\n *\n * @function\n * @param {Array} notes\n * @return {Array}\n */\nexport var toScale = function (notes) {\n  var pcset = compact(notes.map(pc));\n  if (!pcset.length) { return pcset; }\n  var tonic = pcset[0];\n  var scale = unique(pcset);\n  return rotate(scale.indexOf(tonic), scale);\n};\n\n/**\n * Get all scales names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of scale names\n */\nexport var supersets = function (name) {\n  if (!intervals(name).length) { return []; }\n  var isSuperset = isSupersetOf(intervals(name));\n  return scale.names().filter(function (name) { return isSuperset(scale(name)); });\n};\n\n/**\n * Find all scales names that are a subset of the given one\n * (has less notes but all from the given scale)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of scale names\n */\nexport var subsets = function (name) {\n  var isSubset = isSubsetOf(intervals(name));\n  return scale.names().filter(function (name) { return isSubset(scale(name)); });\n};\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-chord.svg)](https://www.npmjs.com/package/tonal-chord)\n * [![tonal](https://img.shields.io/badge/tonal-chord-yellow.svg)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-chord` is a collection of functions to manipulate musical chords\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * // es6\n * import * as Chord from \"tonal-chord\"\n * // es5\n * const Chord = require(\"tonal-chord\")\n *\n * @example\n * Chord.notes(\"CMaj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n *\n * @module Chord\n */\nimport { tokenize as split } from \"tonal-note\";\nimport { transpose } from \"tonal-distance\";\nimport { chord } from \"tonal-dictionary\";\nimport { chroma, isSubsetOf, isSupersetOf } from \"tonal-pcset\";\n\n/**\n * Return the available chord names\n *\n * @function\n * @param {boolean} aliases - true to include aliases\n * @return {Array} the chord names\n *\n * @example\n * Chord.names() // => [\"maj7\", ...]\n */\nexport var names = chord.names;\n\nvar NO_CHORD = Object.freeze({\n  name: null,\n  names: [],\n  intervals: [],\n  chroma: null,\n  setnum: null\n});\n\nvar properties = function (name) {\n  var intervals = chord(name);\n  if (!intervals) { return NO_CHORD; }\n  var s = { intervals: intervals, name: name };\n  s.chroma = chroma(intervals);\n  s.setnum = parseInt(s.chroma, 2);\n  s.names = chord.names(s.chroma);\n  return s;\n};\n\nvar memo = function (fn, cache) {\n  if ( cache === void 0 ) cache = {};\n\n  return function (str) { return cache[str] || (cache[str] = fn(str)); };\n};\n\n/**\n * Get chord properties. It returns an object with:\n *\n * - name: the chord name\n * - names: a list with all possible names (includes the current)\n * - intervals: an array with the chord intervals\n * - chroma:  chord croma (see pcset)\n * - setnum: chord chroma number\n *\n * @function\n * @param {String} name - the chord name (without tonic)\n * @return {Object} an object with the properties or a object with all properties\n * set to null if not valid chord name\n */\nexport var props = memo(properties);\n\n/**\n * Get chord intervals. It always returns an array\n *\n * @function\n * @param {String} name - the chord name (optionally a tonic and type)\n * @return {Array<String>} a list of intervals or null if the type is not known\n */\nexport var intervals = function (name) { return props(tokenize(name)[1]).intervals; };\n\n/**\n * Get the chord notes of a chord. This function accepts either a chord name\n * (for example: \"Cmaj7\") or a list of notes.\n *\n * It always returns an array, even if the chord is not found.\n *\n * @function\n * @param {String} nameOrTonic - name of the chord or the tonic (if the second parameter is present)\n * @param {String} [name] - (Optional) name if the first parameter is the tonic\n * @return {Array} an array of notes or an empty array\n *\n * @example\n * Chord.notes(\"Cmaj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n * Chord.notes(\"C\", \"maj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n */\nexport function notes(nameOrTonic, name) {\n  if (name) { return props(name).intervals.map(transpose(nameOrTonic)); }\n  var ref = tokenize(nameOrTonic);\n  var tonic = ref[0];\n  var type = ref[1];\n  return props(type).intervals.map(transpose(tonic));\n}\n\n/**\n * Check if a given name correspond to a chord in the dictionary\n *\n * @function\n * @param {String} name\n * @return {Boolean}\n * @example\n * Chord.exists(\"CMaj7\") // => true\n * Chord.exists(\"Maj7\") // => true\n * Chord.exists(\"Ablah\") // => false\n */\nexport var exists = function (name) { return chord(tokenize(name)[1]) !== undefined; };\n\n/**\n * Get all chords names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of chord names\n */\nexport var supersets = function (name) {\n  if (!intervals(name).length) { return []; }\n  var isSuperset = isSupersetOf(intervals(name));\n  return chord.names().filter(function (name) { return isSuperset(chord(name)); });\n};\n\n/**\n * Find all chords names that are a subset of the given one\n * (has less notes but all from the given chord)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of chord names\n */\nexport var subsets = function (name) {\n  var isSubset = isSubsetOf(intervals(name));\n  return chord.names().filter(function (name) { return isSubset(chord(name)); });\n};\n\n// 6, 64, 7, 9, 11 and 13 are consider part of the chord\n// (see https://github.com/danigb/tonal/issues/55)\nvar NUM_TYPES = /^(6|64|7|9|11|13)$/;\n/**\n * Tokenize a chord name. It returns an array with the tonic and chord type\n * If not tonic is found, all the name is considered the chord name.\n *\n * This function does NOT check if the chord type exists or not. It only tries\n * to split the tonic and chord type.\n *\n * @function\n * @param {String} name - the chord name\n * @return {Array} an array with [type, tonic]\n * @example\n * Chord.tokenize(\"Cmaj7\") // => [ \"C\", \"maj7\" ]\n * Chord.tokenize(\"C7\") // => [ \"C\", \"7\" ]\n * Chord.tokenize(\"mMaj7\") // => [ \"\", \"mMaj7\" ]\n * Chord.tokenize(\"Cnonsense\") // => [ \"C\", \"nonsense\" ]\n */\nexport function tokenize(name) {\n  var p = split(name);\n  if (p[0] === \"\") { return [\"\", name]; }\n  // aug is augmented (see https://github.com/danigb/tonal/issues/55)\n  if (p[0] === \"A\" && p[3] === \"ug\") { return [\"\", \"aug\"]; }\n\n  if (NUM_TYPES.test(p[2])) {\n    return [p[0] + p[1], p[2] + p[3]];\n  } else {\n    return [p[0] + p[1] + p[2], p[3]];\n  }\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-dictionary.svg)](https://www.npmjs.com/package/tonal-dictionary)\n *\n * `tonal-dictionary` contains a dictionary of musical scales and chords\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * // es6\n * import * as Dictionary from \"tonal-dictionary\"\n * // es5\n * const Dictionary = require(\"tonal-dictionary\")\n *\n * @example\n * Dictionary.chord(\"Maj7\") // => [\"1P\", \"3M\", \"5P\", \"7M\"]\n *\n * @module Dictionary\n */\nimport sdata from \"./data/scales.json\";\nimport cdata from \"./data/chords.json\";\nimport { chroma } from \"tonal-pcset\";\n\nexport var dictionary = function (raw) {\n  var keys = Object.keys(raw).sort();\n  var data = [];\n  var index = [];\n\n  var add = function (name, ivls, chroma) {\n    data[name] = ivls;\n    index[chroma] = index[chroma] || [];\n    index[chroma].push(name);\n  };\n\n  keys.forEach(function (key) {\n    var ivls = raw[key][0].split(\" \");\n    var alias = raw[key][1];\n    var chr = chroma(ivls);\n\n    add(key, ivls, chr);\n    if (alias) { alias.forEach(function (a) { return add(a, ivls, chr); }); }\n  });\n  var allKeys = Object.keys(data).sort();\n\n  var dict = function (name) { return data[name]; };\n  dict.names = function (p) {\n    if (typeof p === \"string\") { return (index[p] || []).slice(); }\n    else { return (p === true ? allKeys : keys).slice(); }\n  };\n  return dict;\n};\n\nexport var combine = function (a, b) {\n  var dict = function (name) { return a(name) || b(name); };\n  dict.names = function (p) { return a.names(p).concat(b.names(p)); };\n  return dict;\n};\n\n/**\n * A dictionary of scales: a function that given a scale name (without tonic)\n * returns an array of intervals\n *\n * @function\n * @param {String} name\n * @return {Array} intervals\n * @example\n * import { scale } from \"tonal-dictionary\"\n * scale(\"major\") // => [\"1P\", \"2M\", ...]\n * scale.names(); // => [\"major\", ...]\n */\nexport var scale = dictionary(sdata);\n\n/**\n * A dictionary of chords: a function that given a chord type\n * returns an array of intervals\n *\n * @function\n * @param {String} type\n * @return {Array} intervals\n * @example\n * import { chord } from \"tonal-dictionary\"\n * chord(\"Maj7\") // => [\"1P\", \"3M\", ...]\n * chord.names(); // => [\"Maj3\", ...]\n */\nexport var chord = dictionary(cdata);\nexport var pcset = combine(scale, chord);\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-key.svg?style=flat-square)](https://www.npmjs.com/package/tonal-key)\n *\n * The `Tonal` module is a facade to the rest of the modules. They are namespaced,\n * so for example to use `pc` function from `tonal-note` you have to write:\n * `Tonal.Note.pc`\n *\n * It exports the following modules:\n * - Note\n * - Interval\n * - Distance\n * - Scale\n * - Chord\n * - PcSet\n *\n * Additionally this facade exports some functions without namespace (see \"Methods\" below)\n *\n * @example\n * // es6 modules\n * import * as Tonal from \"tonal\"\n * Tonal.Note.name(\"cx\") // => \"C##\"\n *\n * @example\n * import { Note } from \"tonal\"\n * Note.name(\"bb\") // => \"Bb\"\n *\n * @example\n * // es5 node modules\n * var Tonal = require(\"tonal\");\n * Tonal.Distance.transpose(Tonal.Note.pc(\"C#2\"), \"M3\") // => \"E#\"\n * Tonal.Chord.notes(\"Dmaj7\") // => [\"D\", \"F#\", \"A\", \"C#\"]\n *\n * @module Tonal\n */\nimport * as Array from \"tonal-array\";\nimport * as Note from \"tonal-note\";\nimport * as Interval from \"tonal-interval\";\nimport * as Distance from \"tonal-distance\";\nimport * as Dictionary from \"tonal-dictionary\";\nimport * as Scale from \"tonal-scale\";\nimport * as Chord from \"tonal-chord\";\nimport * as PcSet from \"tonal-pcset\";\n\nexport { Array, Note, Interval, Distance, Scale, Chord, PcSet, Dictionary };\n\n/**\n * Transpose a note by an interval\n * @function\n * @param {String} note\n * @param {String} interval\n * @return {String} the transported note\n * @see Distance.transpose\n */\nexport const transpose = Distance.transpose;\n\n/**\n * Get the interval from two notes\n * @function\n * @param {String} from\n * @param {String} to\n * @return {String} the interval in reverse shorthand notation\n * @see Distance.interval\n */\nexport const interval = Distance.interval;\n\n/**\n * Get note properties\n * @function\n * @param {String} note - the note name\n * @return {Object}\n * @see Note.props\n * @example\n * Tonal.note(\"A4\").chroma // => 9\n */\nexport const note = Note.props;\n\n/**\n * Get midi note number\n * @function\n * @param {String} note\n * @return {Number}\n * @see Note.midi\n * @example\n * Tonal.midi(\"A4\") // => 49\n */\nexport const midi = Note.midi;\n\n/**\n * Get note frequency using equal tempered tuning at 440\n * @function\n * @param {String} note\n * @return {Number}\n * @see Note.freq\n * @example\n * Tonal.freq(\"A4\") // => 440\n */\nexport const freq = Note.freq;\n\n/**\n * Get intervals from a chord type\n * @function\n * @param {String} type - the chord type (no tonic)\n * @return {Array} an array of intervals or undefined if the chord type is not known\n * @see Dictionary.chord\n * @example\n * Tonal.chord(\"m7b5\") // => [\"1P\", \"3m\", \"5d\", \"7m\"]\n */\nexport const chord = Dictionary.chord;\n\n/**\n * Get intervals from scale name\n * @function\n * @param {String} name - the scale name (without tonic)\n * @return {Array} an array of intervals or undefiend if the scale is not kown\n * @example\n * Tonal.scale(\"major\") // => [\"1P\", \"2M\", \"3M\"...]\n */\nexport const scale = Dictionary.scale;\n","\n//Creo Canvas\nexport var canvas=document.querySelector(\"#canvas\");\nexport var ctx = canvas.getContext(\"2d\")\n\n//creo una sfumatura lineare lungo y di 7 colori\nexport var my_gradient = ctx.createLinearGradient(0,0,0,canvas.height);\nmy_gradient.addColorStop(1/7,\"#E53935\");\nmy_gradient.addColorStop(2/7,\"#FFA726\");\nmy_gradient.addColorStop(3/7,\"#FFEB3B\");\nmy_gradient.addColorStop(4/7,\"#7CB342\");\nmy_gradient.addColorStop(5/7,\"#00796B\");\nmy_gradient.addColorStop(6/7,\"#0277BD\");\nmy_gradient.addColorStop(7/7,\"#0D47A1\");\nvar matrix;\n\nfunction createMatrix(){\n  var stepx = canvas.width/12;\n  var stepy = canvas.height/7;\n  matrix = [[[0,0],[stepx,0],[stepx*2,0],[stepx*3,0],[stepx*4,0],[stepx*5,0],[stepx*6,0],[stepx*7,0],[stepx*8,0],[stepx*9,0],[stepx*10,0],[stepx*11,0]],\n                [[0, stepy],[stepx,stepy],[stepx*2,stepy],[stepx*3,stepy],[stepx*4,stepy],[stepx*5,stepy],[stepx*6,stepy],[stepx*7,stepy],[stepx*8,stepy],[stepx*9,stepy],[stepx*10,stepy],[stepx*11,stepy]],\n                [[0, stepy*2],[stepx,stepy*2],[stepx*2,stepy*2],[stepx*3,stepy*2],[stepx*4,stepy*2],[stepx*5,stepy*2],[stepx*6,stepy*2],[stepx*7,stepy*2],[stepx*8,stepy*2],[stepx*9,stepy*2],[stepx*10,stepy*2],[stepx*11,stepy*2]],\n                [[0, stepy*3],[stepx,stepy*3],[stepx*2,stepy*3],[stepx*3,stepy*3],[stepx*4,stepy*3],[stepx*5,stepy*3],[stepx*6,stepy*3],[stepx*7,stepy*3],[stepx*8,stepy*3],[stepx*9,stepy*3],[stepx*10,stepy*3],[stepx*11,stepy*3]],\n                [[0, stepy*4],[stepx,stepy*4],[stepx*2,stepy*4],[stepx*3,stepy*4],[stepx*4,stepy*4],[stepx*5,stepy*4],[stepx*6,stepy*4],[stepx*7,stepy*4],[stepx*8,stepy*4],[stepx*9,stepy*4],[stepx*10,stepy*4],[stepx*11,stepy*4]],\n                [[0, stepy*5],[stepx,stepy*5],[stepx*2,stepy*5],[stepx*3,stepy*5],[stepx*4,stepy*5],[stepx*5,stepy*5],[stepx*6,stepy*5],[stepx*7,stepy*5],[stepx*8,stepy*5],[stepx*9,stepy*5],[stepx*10,stepy*5],[stepx*11,stepy*5]],\n                [[0, stepy*6],[stepx,stepy*6],[stepx*2,stepy*6],[stepx*3,stepy*6],[stepx*4,stepy*6],[stepx*5,stepy*6],[stepx*6,stepy*6],[stepx*7,stepy*6],[stepx*8,stepy*6],[stepx*9,stepy*6],[stepx*10,stepy*6],[stepx*11,stepy*6]]]\n\n  }\n\n  createMatrix();\n  //creo e muovo il rect\n\nexport var stato= {\n    xy:[],\n    alpha:[]\n  };\n\nexport function blink(arr){\n  for(var i=0; i<arr.length; i++){\n    var x_canv = arr[i][1];\n    var y_canv =arr[i][0];\n    var alpha= arr[i][2];\n\n    if(x_canv!=stato.xy[i] && y_canv!=stato.xy[i] && alpha!=stato.alpha[i]){\n      stato.xy.push([x_canv,y_canv]);\n      stato.alpha.push(alpha);\n    }\n  //ctx.clearRect(0,0,canvas.width,canvas.height);\n  //ctx.fillRect(x, y, 100, 50);\n    ctx.fillStyle=my_gradient;\n    ctx.fillRect(matrix[x_canv][y_canv][0],matrix[x_canv][y_canv][1],50,30);\n\n  }\nconsole.log(\"stato\", stato.xy);\n}\n\nexport function cancel_stato(){\n  stato.xy= [];\n  stato.alpha=[]\n  console.log(stato.xy);\n}\n","export var circle = [];\ncircle.push([\"Fmaj7\",\"Cmaj7\", \"G7\",\"Dm7\", \"Am7\",\"Em7\", \"Bsemi\"]);\ncircle.push([\"Cmaj7\",\"Gmaj7\", \"D7\",\"Am7\", \"Em7\",\"Bm7\", \"F#semi\"]);\ncircle.push([\"Gmaj7\",\"Dmaj7\", \"A7\",\"Em7\", \"Bm7\",\"F#m7\",  \"C#semi\"]);\ncircle.push([ \"Dmaj7\",\"Amaj7\",\"E7\",\"Bm7\", \"F#m7\",\"C#m7\",  \"G#semi\"]);\ncircle.push([ \"Amaj7\",\"Emaj7\", \"B7\",\"F#m7\",\"C#m7\",\"G#m7\",  \"D#semi\"]);\ncircle.push([\"Emaj7\",\"Bmaj7\",\"F#7\",\"C#m7\",\"G#m7\",\"D#m7\",    \"A#semi\"]);\ncircle.push([ \"Bmaj7\",\"F#maj7\",\"C#7\",\"G#m7\",\"D#m7\",\"A#m7\", \"Fsemi\"]);\ncircle.push([\"F#maj7\",\"C#maj7\",\"G#7\",\"D#m7\",\"A#m7\",\"Fm7\", \"Csemi\"]);\ncircle.push([\"C#maj7\",\"G#maj7\",  \"D#7\",\"A#m7\", \"Fm7\",\"Cm7\", \"Gsemi\"]);\ncircle.push([ \"G#maj7\",\"D#maj7\", \"A#7\",\"Fm7\",\"Cm7\",\"Gm7\",  \"Dsemi\"]);\ncircle.push([ \"D#maj7\",\"A#maj7\", \"F7\",\"Cm7\", \"Gm7\",\"Dm7\", \"Asemi\"]);\ncircle.push([\"A#maj7\",\"Fmaj7\", \"C7\",\"Gm7\",  \"Dm7\",\"Am7\", \"Esemi\"]);\nimport {stato,cancel_stato} from \"./canvas.js\";\nimport {canvas  as canvas2,show_progression,change_progression} from \"./canvas_progression.js\";\nimport {ctx as ctx2}  from \"./canvas_progression.js\";\nexport var key_ = [\"C\",\"G\",\"D\",\"A\",\"E\",\"B\",\"Gb/F#\",\"Db/C#\",\"Ab\",\"Eb\",\"Bb\",\"F\"];\nexport var degree= [];\nvar i=0;\nvar end=0;\nvar count;\nexport var flag=false;\nimport {scale_maj} from \"./Keyboard_JS.js\";\nvar change_scale=0;\nvar array_app=[];\nvar ciao=true;\n$(document).ready(function() {$('#tonalit').prop('disabled', true);\n});\n\nexport function findKey(c,vec1,vec2){\n  for (var i=0; i<circle.length; i++){\n    if(circle[i].includes(c))\n    vec1[i]++;\n  }\n  var vec_max = Math.max.apply(Math,vec1);\n  console.log(\"vec_max \",vec_max);\n  if(vec2.length==4){\n\n    var indexes = [], j = -1;\n    var key_found = [];\n\n    while ((j = vec1.indexOf(vec_max, j+1)) != -1){ //va a cercare nel vettore counter tutte le occorrenze dei valori massimi\n        indexes.push(j);\n    }\n\n    //console.log(\"indici\",indexes);\n    for(var k=0; k<indexes.length; k++){\n      var index= indexes[k];\n      key_found.push(key_[index]);    //ci potrebbero essere molteplici tonalit\n}\n\nfind_degrees(stato,indexes);\n$('#tonalit').prop('disabled', true);\n\nif(indexes.length>1){\n  flag=true;\n  //alert(\"Trovata pi di una tonalit! Premere sul tasto per visualizzare i diversi percorsi\");\n  count= degree.length/indexes.length;\n  split_array();\n\n  return key_found;\n\n}\nshow_progression(degree,degree[0]);\nreturn key_found;\n}\n\n}\n\n\nfunction find_degrees(state, indexes){\n for (var i=0; i<indexes.length; i++){\n   for(var j=0; j<state.xy.length; j++){\n     if(indexes[i]==state.xy[j][1]){\n       degree.push(state.xy[j][0]);\n     }\n   }\n }\n console.log(\"modi\",degree);\n}\n\n\nfunction split_array(){\n\nif(end<degree.length){\n  $('#tonalit').prop('disabled', true);\n  end=end+count;\n  var shallow= degree.slice(i,end);\n  i=i+count;\n  show_progression(shallow,shallow[0]);\n}\nelse{\n  i=0;\n  end=0;\n}\n\n}\n\n\n$(document).ready(function() {\n\n  $(\"#tonalit\").click(function () {\n\n    for(var i=0; i<scale_maj[change_scale].length;i++){\n            array_app=scale_maj[change_scale][i];\n           $(\"#\"+array_app).css(\"visibility\", \"hidden\");\n           array_app=[];\n      }\n\n      if(change_scale===scale_maj.length-1){\n\n        change_scale=0;\n        array_app=[];\n        change_progression();\n        split_array();\n}else{\n  change_scale++;\n  array_app=[];\n\n}\n    //    if(ciao===true){\n      for(var i=0; i<scale_maj[change_scale].length;i++){\n          array_app=scale_maj[change_scale][i];\n             $(\"#\"+array_app).css(\"visibility\", \"visible\");\n             array_app=[];\n        }\n//}\n\n  change_progression();\n  split_array();\n\n});\n\n});\n\n\nexport function cancel_degrees(){\n  cancel_stato();\n  degree=[];\n  for(var i=0; i<scale_maj[change_scale].length;i++){\n          array_app=scale_maj[change_scale][i];\n         $(\"#\"+array_app).css(\"visibility\", \"hidden\");\n\n    }\n    array_app=[];\n\n\n}\n","import {degree,cancel_degrees,flag,check_key} from \"./circleFifth.js\";\r\n\r\nexport var canvas=document.querySelector(\"#canvas2\");\r\nexport var ctx = canvas.getContext(\"2d\");\r\n\r\nvar stepx = canvas.width/2;\r\nvar stepy = canvas.height/7;\r\n//1-3-5-7-9-11-13\r\nexport var y0=0;\r\nvar x0 = stepx;\r\nexport var xf,yf;\r\nvar t=0;\r\nvar angle= Math.PI/3;\r\nvar g= 9.8;\r\nexport var difference= [];\r\nexport var velocity=[];\r\nexport var invert_sign= [];\r\nexport var k=0;\r\nvar radius=10;\r\n\r\nvar ciao=true;\r\n/*ctx.beginPath();\r\nctx.rect(stepx-70/2, 0, 70, stepy);\r\nctx.fillStyle = \"#E53935\";\r\nctx.fill();\r\n\r\nctx.beginPath();\r\nctx.rect(stepx-70/2, stepy,70, stepy);\r\nctx.fillStyle = \"#FFA726\";\r\nctx.fill();\r\n\r\nctx.beginPath();\r\nctx.rect(stepx-70/2, stepy*2,70, stepy);\r\nctx.fillStyle = \"#FFEB3B\";\r\nctx.fill();\r\n\r\nctx.beginPath();\r\nctx.rect(stepx-70/2, stepy*3,70, stepy);\r\nctx.fillStyle = \"#7CB342\";\r\nctx.fill();\r\n\r\nctx.beginPath();\r\nctx.rect(stepx-70/2, stepy*4,70, stepy);\r\nctx.fillStyle = \"#00796B\";\r\nctx.fill();\r\n\r\nctx.beginPath();\r\nctx.rect(stepx-70/2, stepy*5,70, stepy);\r\nctx.fillStyle = \"#0277BD\";\r\nctx.fill();\r\n\r\nctx.beginPath();\r\nctx.rect(stepx-70/2, stepy*6,70, stepy);\r\nctx.fillStyle = \"#0D47A1\";\r\nctx.fill();\r\n*/        //OLD VERSION\r\n\r\n/*function drawBorder(xPos, yPos, width, height, thickness)\r\n{\r\n   ctx.beginPath();\r\n\r\n  ctx.fillStyle='#FF4500';\r\n  ctx.fillRect(xPos - (thickness), yPos - (thickness), width + (thickness * 2), height + (thickness * 2));\r\n}*/   //FUNZIONE TROVATA SU STACKOVERFLOW CHE DISEGNAVA DEI BORDI PER I RECT CHE FORMAVANO LA LINEA\r\n\r\nfunction show_square(Ypos){\r\n if(Ypos>=0 && Ypos<stepy) {\r\n   ctx.globalAlpha = 0.6;\r\n   ctx.beginPath();\r\n   ctx.rect(stepx-70/2, 0, 70, stepy);\r\n   ctx.fillStyle = \"#E53935\";\r\n   ctx.fill();\r\n   ctx.font = \"20px Arial\";\r\n   ctx.fillText(\"IV - Lydian\", 10, stepy/2);\r\n}\r\n if(Ypos>=stepy && Ypos<stepy*2) {\r\n   ctx.globalAlpha = 0.6;\r\n   ctx.beginPath();\r\n   ctx.rect(stepx-70/2, stepy,70, stepy);\r\n   ctx.fillStyle = \"#FFA726\";\r\n   ctx.fill();\r\n   ctx.font = \"20px Arial\";\r\n   ctx.fillText(\"I - Ionian\", 10, 3*stepy/2);\r\n                                 }\r\n if(Ypos>=stepy*2 && Ypos<stepy*3) {\r\n   ctx.globalAlpha = 0.6;\r\n   ctx.beginPath();\r\n   ctx.rect(stepx-70/2, stepy*2,70, stepy);\r\n   ctx.fillStyle = \"#FFEB3B\";\r\n   ctx.fill();\r\n   ctx.font = \"16px Arial\";\r\n   ctx.fillText(\"V - Misolydian\", 10, 5*stepy/2);\r\n }\r\n if(Ypos>=stepy*3 && Ypos<stepy*4) {\r\n   ctx.globalAlpha = 0.6;\r\n   ctx.beginPath();\r\n   ctx.rect(stepx-70/2, stepy*3,70, stepy);\r\n   ctx.fillStyle = \"#7CB342\";\r\n   ctx.fill();\r\n   ctx.font = \"20px Arial\";\r\n   ctx.fillText(\"II - Doric\", 10, 7*stepy/2);\r\n }\r\n if(Ypos>=stepy*4 && Ypos<stepy*5) {\r\n   ctx.globalAlpha = 0.6;\r\n   ctx.beginPath();\r\n   ctx.rect(stepx-70/2, stepy*4,70, stepy);\r\n   ctx.fillStyle = \"#00796B\";\r\n   ctx.fill();\r\n   ctx.font = \"20px Arial\";\r\n   ctx.fillText(\"VI - Aeolian\", 10, 9*stepy/2);\r\n}\r\n if(Ypos>=stepy*5 && Ypos<stepy*6) {\r\n   ctx.globalAlpha = 0.6;\r\n   ctx.beginPath();\r\n   ctx.rect(stepx-70/2, stepy*5,70, stepy);\r\n   ctx.fillStyle = \"#0277BD\";\r\n   ctx.fill();\r\n   ctx.font = \"18px Arial\";\r\n   ctx.fillText(\"III - Phrygian\", 10, 11*stepy/2);\r\n }\r\n if(Ypos>=stepy*6 && Ypos<canvas.height) {\r\n   ctx.globalAlpha = 0.6;\r\n   ctx.beginPath();\r\n   ctx.rect(stepx-70/2, stepy*6,70, stepy);\r\n   ctx.fillStyle = \"#0D47A1\";\r\n   ctx.fill();\r\n   ctx.font = \"18px Arial\";\r\n   ctx.fillText(\"VII - Locrian\", 10, 13*stepy/2);\r\n }\r\n} //FUNZIONE CHE COMANDA L'APPARIZIONE DI UN QUADRATO IN BASE ALLA POSIZIONE RAGGIUNTA DALLA LINEA\r\n\r\nfunction choose_color(Ypos){\r\n var color;\r\n if(Ypos>=0 && Ypos<stepy) color='#E53935';\r\n if(Ypos>=stepy && Ypos<stepy*2) color='#FFA726';\r\n if(Ypos>=stepy*2 && Ypos<stepy*3) color='#FFEB3B';\r\n if(Ypos>=stepy*3 && Ypos<stepy*4) color='#7CB342';\r\n if(Ypos>=stepy*4 && Ypos<stepy*5) color='#00796B';\r\n if(Ypos>=stepy*5 && Ypos<stepy*6) color='#0277BD';\r\n if(Ypos>=stepy*6 && Ypos<canvas.height) color='#0D47A1';\r\nreturn color;\r\n} //FUNZIONE CHE COMANDA IL CAMBIO DI COLORE DELLA LINEA IN BASE ALLA SUA POSIZIONE\r\n\r\nfunction choose_position(value){\r\n    switch(value){\r\n        case 0:\r\n        y0=stepy/2;\r\n        ctx.globalAlpha = 0.6;\r\n        ctx.beginPath();\r\n        ctx.arc(stepx, y0, radius, 0, 2 * Math.PI);\r\n        ctx.lineWidth=5;\r\n        ctx.strokeStyle='magenta';\r\n        ctx.stroke();\r\n        ctx.rect(stepx-70/2, 0, 70, stepy);\r\n        ctx.fillStyle = \"#E53935\";\r\n        ctx.fill();\r\n        ctx.font = \"20px Arial\";\r\n        ctx.fillText(\"IV - Lydian\", 10, stepy/2);\r\n        break;\r\n\r\n        case 1:\r\n        y0=3*stepy/2;\r\n        ctx.globalAlpha = 0.6;\r\n        ctx.beginPath();\r\n        ctx.arc(stepx, y0, radius, 0, 2 * Math.PI);\r\n        ctx.lineWidth=5;\r\n        ctx.strokeStyle='magenta';\r\n        ctx.stroke();\r\n        ctx.rect(stepx-70/2, stepy, 70, stepy);\r\n        ctx.fillStyle = \"#FFA726\";\r\n        ctx.fill();\r\n        ctx.font = \"20px Arial\";\r\n        ctx.fillText(\"I - Ionian\", 10, 3*stepy/2);\r\n        break;\r\n\r\n        case 2:\r\n        y0=5*stepy/2;\r\n        ctx.globalAlpha = 0.6;\r\n        ctx.beginPath();\r\n        ctx.arc(stepx, y0, radius, 0, 2 * Math.PI);\r\n        ctx.lineWidth=5;\r\n        ctx.strokeStyle='magenta';\r\n        ctx.stroke();\r\n        ctx.rect(stepx-70/2, stepy*2, 70, stepy);\r\n        ctx.fillStyle = \"#FFEB3B\";\r\n        ctx.fill();\r\n        ctx.font = \"16px Arial\";\r\n        ctx.fillText(\"V - Misolydian\", 10, 5*stepy/2);\r\n        break;\r\n\r\n        case 3:\r\n        y0=7*stepy/2;\r\n        ctx.globalAlpha = 0.6;\r\n        ctx.beginPath();\r\n        ctx.arc(stepx, y0, radius, 0, 2 * Math.PI);\r\n        ctx.lineWidth=5;\r\n        ctx.strokeStyle='magenta';\r\n        ctx.stroke();\r\n        ctx.rect(stepx-70/2, stepy*3, 70, stepy);\r\n        ctx.fillStyle = \"#7CB342\";\r\n        ctx.fill();\r\n        ctx.font = \"20px Arial\";\r\n        ctx.fillText(\"II - Doric\", 10, 7*stepy/2);\r\n        break;\r\n\r\n        case 4:\r\n        y0=9*stepy/2;\r\n        ctx.globalAlpha = 0.6;\r\n        ctx.beginPath();\r\n        ctx.arc(stepx, y0, radius, 0, 2 * Math.PI);\r\n        ctx.lineWidth=5;\r\n        ctx.strokeStyle='magenta';\r\n        ctx.stroke();\r\n        ctx.rect(stepx-70/2, stepy*4, 70, stepy);\r\n        ctx.fillStyle = \"#00796B\";\r\n        ctx.fill();\r\n        ctx.font = \"20px Arial\";\r\n        ctx.fillText(\"VI - Aeolian\", 10, 9*stepy/2);\r\n        console.log('dovrei aver disegnato il quadrato a ', stepx,stepy, y0);\r\n        break;\r\n\r\n        case 5:\r\n        y0=11*stepy/2;\r\n        ctx.globalAlpha = 0.6;\r\n        ctx.beginPath();\r\n        ctx.arc(stepx, y0, radius, 0, 2 * Math.PI);\r\n        ctx.lineWidth=5;\r\n        ctx.strokeStyle='magenta';\r\n        ctx.stroke();\r\n        ctx.rect(stepx-70/2, stepy*5, 70, stepy);\r\n        ctx.fillStyle = \"#0277BD\";\r\n        ctx.fill();\r\n        ctx.font = \"18px Arial\";\r\n        ctx.fillText(\"III - Phrygian\", 10, 11*stepy/2);\r\n        break;\r\n\r\n\t\t    case 6:\r\n        y0=13*stepy/2;\r\n        ctx.globalAlpha = 0.6;\r\n        ctx.beginPath();\r\n        ctx.arc(stepx, y0, radius, 0, 2 * Math.PI);\r\n        ctx.lineWidth=5;\r\n        ctx.strokeStyle='magenta';\r\n        ctx.stroke();\r\n        ctx.rect(stepx-70/2, stepy*6, 70, stepy);\r\n        ctx.fillStyle = \"#0D47A1\";\r\n        ctx.fill();\r\n        ctx.font = \"18px Arial\";\r\n        ctx.fillText(\"VII - Locrian\", 10, 13*stepy/2);\r\n        break;\r\n\r\n\t\t}\r\n} //QUESTA FUNZIONE NON SOLO DECIDE IL PUNTO INIZIALE DA CUI FAR PARTIRE LA LINEA, MA DECIDE ANCHE QUALE QUADRATO FARE APPARIRE PER PRIMO\r\n\r\nfunction choose_velocity(degree){\r\nfor(var i=0;i<degree.length-1;i++){\r\n\r\n difference.push(Math.abs(degree[i+1]-degree[i]));\r\n if(degree[i+1]-degree[i]>=0){\r\n  invert_sign[i]=false;\r\n }\r\n else{\r\n  invert_sign[i]=true;\r\n }\r\n// console.log(difference)\r\n\r\n}\r\nfor(var j=0; j<difference.length; j++){\r\n  if(difference[j]===0){velocity[j]=0;}\r\n if(difference[j]===1){velocity[j]=25;}\r\n if(difference[j]===2){velocity[j]=36;}\r\n if(difference[j]===3){velocity[j]=44;}\r\n if(difference[j]===4){velocity[j]=51;}\r\n if(difference[j]===5){velocity[j]=57;}\r\n if(difference[j]===6){velocity[j]=62;}\r\n\r\n }\r\n\r\n} //FUNZIONE CHE GESTISCE IL CAMBIO DI VELOCITA' IN BASE AL MODO, INFATTI LE DISTANZE VENGONO RAGGIUNTE IN BASE ALLE VELOCITA' INIZIALI CHE SONO STATE MAPPATE IN BASE ALLE DIMENSIONI DEL CANVAS\r\n\r\nfunction render_prog(time,value,sign){ //FUNZIONE CHE REGOLA IL MOTO PARABOLICO DELLE LINEE\r\n\r\n if(sign==true){  //DAL BASSO VERSO L'ALTO\r\n  yf= y0 - velocity[k]*Math.cos(angle)*time;\r\n  xf= ((-1/2)*g*(Math.pow(time, 2))) + (velocity[k]*Math.sin(angle)*time) +x0;\r\n}\r\n else{  //DALL'ALTO VERSO IL BASSO\r\n  yf= y0 + velocity[k]*Math.cos(angle)*time;\r\n  xf= ((-1/2)*g*(Math.pow(time, 2))) + (velocity[k]*Math.sin(angle)*time) +x0;\r\n }\r\n\r\n //drawBorder(xf, yf, 1, 1,1);\r\nctx.beginPath();                    //VENGONO DISEGNATI TANTI QUADRATI PICCOLI PER FORMARE LA LINEA\r\nctx.rect(xf,yf,3,3);\r\nctx.fillStyle= choose_color(y0);\r\nctx.fill();\r\n\r\nctx.lineWidth = 0.2;              //DISEGNA I BORDI DEI QUADRATINI(RENDE LE LINEE PI LUMINOSE)\r\nctx.strokeStyle= 'white';\r\nctx.stroke();\r\n\r\nvar tg=(2*velocity[k]*Math.sin(angle))/g;  //TEMPO CHE OGNI LINEA IMPIEGA PER RAGGIUNGERE IL PUNTO D'ARRIVO\r\nconsole.log(\"cappa\",k);\r\n if(time>tg){                             //CONTROLLO CHE FERMA LA LINEA AL PUNTO FINALE E AGGIORNA IL NUOVO PUNTO INIZIALE CON QUELLO FINALE PRECEDENTE\r\n    k=k+1;\r\n    clearInterval(value);\r\n    t=0;\r\n    y0=yf;\r\n    ctx.fillStyle= choose_color(y0);\r\n    show_square(y0);\r\n  if(k<invert_sign.length){             //CONTROLLO CHE PER FORTUNA PUO' ESSERE USATO PER DIRE CHE DEVE ESSERE INIZIALE UN NUOVO PERCORSO\r\n    var clear = setInterval(function(){\r\n  render_prog(t+=0.03, clear,invert_sign[k]);\r\n},0.2);\r\n  }\r\n   else{\r\n     if(flag===true){\r\n     $('#tonalit').prop('disabled', false);\r\n   }      //SI ESCE DALLA FUNZIONE E QUINDI IL PERCORSO E' FINITO.\r\n    return;\r\n   }\r\n  }\r\n}\r\n\r\n\r\nexport function show_progression(degree_arr,value){       //FUNZIONE CHE FA COMINCIARE IL TUTTO\r\n\r\n  ctx.clearRect(0,0,canvas.width,canvas.height);\r\n  choose_position(value);             //VIENE SETTATA LA POSIZIONE INIZIALE\r\n  choose_velocity(degree_arr);                //VENGONO SETTATE LE VELOCITA'\r\n  var clear= setInterval(function(){              //TRIGGER INIZIALE DELLA FUNZIONE RENDER\r\n    render_prog(t+=0.03, clear,invert_sign[k]);\r\n  },0.2);\r\n\r\n}\r\n\r\nexport function reset_canvas2(){              //FUNZIONE CHE RESETTA IL TUTTO PER RINIZIARE TUTTO DA CAPO\r\n\r\n  difference=[];\r\n  velocity=[];\r\n  invert_sign=[];\r\n  k=0;\r\n  y0=0;\r\n  xf=0;\r\n  yf=0;\r\n  $('#tonalit').prop('disabled', true);\r\n\r\n  cancel_degrees();                         //FUNZIONE IMPORTATA PERCHE' NON POSSONO ESSERE SVUOTATI VETTORI IMPORTATI DA ALTRI MODULI, QUINDI QUESTO VIENE FATTO NEL MODULO DI APPARTENENZA (VEDERE GLI IMPORT/EXPORT)\r\n}\r\n\r\nexport function change_progression(){\r\n\r\n  difference=[];\r\n  velocity=[];\r\n  invert_sign=[];\r\n  k=0;\r\n  y0=0;\r\n  xf=0;\r\n  yf=0;\r\n}\r\n","export var dizionario = {\n  \"Cmaj7\": [\"C\",\"E\",\"G\",\"B\"],     //majors\n  \"C#maj7\": [\"C#\",\"F\",\"G#\",\"C\"],\n  \"Dmaj7\": [\"D\",\"F#\",\"A\",\"C#\"],\n  \"D#maj7\": [\"D#\",\"G\",\"A#\",\"D\"],\n  \"Emaj7\": [\"E\",\"G#\",\"B\",\"D#\"],\n  \"Fmaj7\": [\"F\",\"A\",\"C\",\"E\"],\n  \"F#maj7\": [\"F#\",\"A#\",\"C#\",\"F\"],\n  \"Gmaj7\": [\"G\",\"B\",\"D\",\"F#\"],\n  \"G#maj7\": [\"G#\",\"C\",\"D#\",\"G\"],\n  \"Amaj7\": [\"A\",\"C#\",\"E\",\"G#\"],\n  \"A#maj7\": [\"A#\",\"D\",\"F\",\"A\"],\n  \"Bmaj7\": [\"B\",\"D#\",\"F#\",\"A#\"],\n  \"Cm7\": [\"C\",\"D#\",\"G\",\"A#\"],     //minors\n  \"C#m7\": [\"C#\",\"E\",\"G#\",\"B\"],\n  \"Dm7\": [\"D\",\"F\",\"A\",\"C\"],\n  \"D#m7\": [\"D#\",\"F#\",\"A#\",\"C#\"],\n  \"Em7\": [\"E\",\"G\",\"B\",\"D\"],\n  \"Fm7\": [\"F\",\"G#\",\"C\",\"D#\"],\n  \"F#m7\": [\"F#\",\"A\",\"C#\",\"E\"],\n  \"Gm7\": [\"G\",\"A#\",\"D\",\"F\"],\n  \"G#m7\": [\"G#\",\"B\",\"D#\",\"F#\"],\n  \"Am7\": [\"A\",\"C\",\"E\",\"G\"],\n  \"A#m7\": [\"A#\",\"C#\",\"F\",\"G#\"],\n  \"Bm7\": [\"B\",\"D\",\"F#\",\"A\"],\n  \"C7\": [\"C\",\"E\",\"G\",\"A#\"],           //dominant 7th\n  \"C#7\": [\"C#\",\"F\",\"G#\",\"B\"],\n  \"D7\": [\"D\",\"F#\",\"A\",\"C\"],\n  \"D#7\": [\"D#\",\"G\",\"A#\",\"C#\"],\n  \"E7\": [\"E\",\"G#\",\"B\",\"D\"],\n  \"F7\": [\"F\",\"A\",\"C\",\"D#\"],\n  \"F#7\": [\"F#\",\"A#\",\"C#\",\"E\"],\n  \"G7\": [\"G\",\"B\",\"D\",\"F\"],\n  \"G#7\": [\"G#\",\"C\",\"D#\",\"F#\"],\n  \"A7\": [\"A\",\"C#\",\"E\",\"G\"],\n  \"A#7\": [\"A#\",\"D\",\"F\",\"G#\"],\n  \"B7\": [\"B\",\"D#\",\"F#\",\"A\"],\n\n\n  \"Csemi\":[\"C\",\"D#\",\"F#\", \"A#\"],       //semidiminished\n  \"C#semi\":[\"C\",\"E\",\"G\", \"B\"],\n  \"Dsemi\":[\"D\",\"F\",\"G#\",\"C\"],\n  \"D#semi\":[\"D#\",\"F#\",\"A\",\"C#\"],\n  \"Esemi\":[\"E\",\"G\",\"A#\", \"D\"],\n  \"Fsemi\":[\"F\",\"G#\",\"B\",\"D#\"],\n  \"F#semi\":[\"F#\",\"A\",\"C\",\"E\"],\n  \"Gsemi\":[\"G\",\"A#\",\"C#\", \"F\"],\n  \"G#semi\":[\"G#\",\"B\",\"D\", \"F#\"],\n  \"Asemi\":[\"A\",\"C\",\"D#\", \"G\"],\n  \"A#semi\":[\"A#\",\"C#\",\"E\", \"G#\"],\n  \"Bsemi\":[\"B\",\"D\",\"F\", \"A\"],\n\n\n};\n","//AGGIORNAMENTO: ALLO STATO ATTUALE IL CODICE FUNZIONA ANCHE CON UNA TASTIERA MIDI, TESTATO E FUNZIONANTE\nvar key= \"q2w3er5t6y7uzsxdcvgbhnjm\"\nvar midi;\nvar c = new AudioContext();\nvar analyser = c.createAnalyser();\nvar volume_master= c.createGain();\n\nvolume_master.connect(c.destination);\n\n\n\nanalyser.fftSize=2048;\nvar bufferLength = analyser.frequencyBinCount;\nvar dataArray = new Uint8Array(bufferLength);\n\n\nvar gain_vec= [];\nvar chord_;         //VARIABILE CHE IDENTIFICA UN SINGOLO ACCORDO E CHE VIENE SOVRASCRITTA OGNI VOLTA\nvar chords_vec=[];  //VETTORE DI ACCORDI\nvar midi_vec=[];    //VETTORE DI NUMERI MIDI (PER GESTIRE I RIVOLTI)\nvar note_vec=[];    //VETTORE DI NOTE (PER IL RICONOSCIMENTO DELL'ACCORDO)\nvar collect_note=[[]];  //VETTORE CONTENTE VETTORI DI NOTE\nvar collect_midi= [[]]; //VETTORE CONTENENTE VETTORI DI NUMERI MIDI (IDEA PER LOOP MAYBE)\nvar i=0;\nimport { chord } from \"./tonal/extensions/detect/index.js\";\nimport { Note, Chord } from \"./tonal\";\nimport {canvas, ctx, my_gradient, blink } from \"./canvas.js\";\nimport {canvas  as canvas2, reset_canvas2,split_array} from \"./canvas_progression.js\";\nimport {ctx as ctx2}  from \"./canvas_progression.js\";\nimport {circle, key_, findKey,degree} from \"./circleFifth.js\";\nvar counter = new Array(circle.length).fill(0);\nvar octave_step=0;\nvar color_chord= [];\n var maj_scale= [2,2,1,2,2,2,1];\n export var scale_maj=[];\n var chromatic_scale=[\"C\",\"Db/C#\",\"D\",\"Eb\",\"E\",\"F\",\"Gb/F#\",\"G\",\"Ab\",\"A\",\"Bb\",\"B\"];\nvar change_scale=0;\n\n//--------------FUNCTION FOR THE DICTIONARY---------------------------------------------------------------------//\nvar canvas3=document.querySelector(\"#canvas3\");\nvar context = canvas3.getContext(\"2d\");\nimport {dizionario as dict}  from \"./dizionario.js\"\n//var getKey = (obj,val) => Object.keys(obj).find(key => obj[key].length === val.length && obj[key].every((kn) => val.includes(kn)));\n\nfunction getKey(obj, arr) {\n\n  // Grab the key from the first object that satisfies the condition...\n  const [ key ] = Object.entries(obj).find(([key, notes]) => {\n\n    // ...that all the notes in the object are included in the\n    // array that was passed in. As long as the notes array and the\n    // query array are the same length, the notes can be in any order\n    return arr.length === notes.length && arr.every(note => notes.includes(note));\n  });\n\n  // Return that key\n  return key;\n}\n\n//console.log(dict[\"Dmaj7\"])\n//console.log(getKey(dict,[\"C\",\"E\",\"G\",\"B\"]));\n\n\n//------------------------------------------------------------------------------------------------------------------//\n\n\nfunction render(vec,key){\n  //console.log(key);\n  var y= document.getElementsByClassName(\"Key\");\n  var x = document.getElementsByClassName(\"chord\");\n  x[i].innerHTML = vec[i];\n  x[i].style.color = \"#14fdce\";\n  x[i].style.textAlign = \"center\";\n  x[i].style.top= \"50px\";\n  x[i].style.fontWeight = \"900\";\n  x[i].style.verticalAlign = 'middle';\n  x[i].style.fontFamily = 'Prompt';\n  if(chords_vec.length==4){\n    y[0].innerHTML = key;\n    y[0].style.color = \"#14fdce\";\n    y[0].style.textAlign = \"center\";\n    y[0].style.top= \"50px\";\n    y[0].style.fontWeight = \"900\";\n    y[0].style.verticalAlign = 'middle';\n    y[0].style.fontFamily = 'Prompt';\n  }\n  note_vec=[];\n  midi_vec=[];\n  chord_=null;\n  i=i+1;\n\n}\n\n\n//FUNZIONE DI TIMEOUT SE NON VIENE PREMUTA SUBITO UN'ALTRA NOTA------------------------//\n\n\nfunction timeOut(){\n  note_vec=[];\n  midi_vec=[];\n}\n\n//-----------------------FUNZIONE MOSTRA TASTI DELLA TASTIERA-----------------------//\n\ndocument.getElementById(\"button\").onclick= function(){\n  for(var i=0; i<key.length; i++){\n  document.getElementsByClassName(\"keyboard\")[i].classList.toggle(\"keyboard_grey\");\n}\n}\n//--------------------------VOLUME MASTER HANDLER---------------------------------//\ndocument.getElementById(\"slider\").addEventListener(\"input\", changeVol);\n\nfunction changeVol(){\n  volume_master.gain.value= parseFloat(document.getElementById(\"slider\").value);\n  console.log(volume_master.gain.value);\n\n}\n//-------------------------FUNZIONE DI RESET--------------------------------------//\n\n\ndocument.getElementById(\"reset\").onclick= function(){\n  for(var j=0; j<chords_vec.length; j++){\n  var x = document.getElementsByClassName(\"chord\");\n  x[j].innerHTML = \"\";\n}\ndocument.getElementsByClassName(\"Key\")[0].innerHTML= \"\";\n  i=0;\n  chords_vec=[];\n  counter.fill(0);\n  console.log(chords_vec);\n  color_chord=[];\n  ctx.clearRect(0,0,canvas.width,canvas.height);\n  ctx2.clearRect(0,0,canvas2.width,canvas2.height);\n  reset_canvas2();\n    scale_maj=[];\n}\n\n//console.log($(\"#highlight\").position().left/ $(\"#highlight\").parent().width() * 100);\n\n\n\n//----------------------------OCTAVE CHANGES....................................//\n$(document).ready(function() {\n    $('#min_oct').click(function() {\n\n\n      octave_step= octave_step-12;\n\n      if(octave_step<-36){                  //controllo che impedisce l'aumento dell'ottava anche se il riquadro sta fermo\n        octave_step=-36;\n      }\n      console.log(octave_step);\n\n      switch(octave_step){\n        case 12: document.getElementById(\"C-first\").innerHTML= \"C5\";\n                document.getElementById(\"C-second\").innerHTML= \"C6\";\n                break;\n\n        case 0: document.getElementById(\"C-first\").innerHTML= \"C4\";\n                document.getElementById(\"C-second\").innerHTML= \"C5\";\n                break;\n        case -12: document.getElementById(\"C-first\").innerHTML= \"C3\";\n                document.getElementById(\"C-second\").innerHTML= \"C4\";\n                break;\n        case -24: document.getElementById(\"C-first\").innerHTML=\"C2\";\n                  document.getElementById(\"C-second\").innerHTML=\"C3\";\n                  break;\n        case -36: document.getElementById(\"C-first\").innerHTML=\"C1\";\n                  document.getElementById(\"C-second\").innerHTML=\"C2\";\n                  break;\n      }\n\n      var containerWidth = $(\".mini_keyboard\").width();\n      var left = parseFloat($('.highlighted').css('left'));\n      //console.log(left);\n      var step = (containerWidth * 0.145);\n      if(left < step){\n        $('.highlighted').css('left',left);\n      }\n      else{\n        left= left - step;\n        $('.highlighted').css('left',left);\n      }\n    });\n});\n\n$(document).ready(function() {\n    $('#plus_oct').click(function() {\n\n\n\n      if(octave_step==24){                //controllo che impedisce l'aumento dell'ottava anche se il riquadro sta fermo\n        octave_step=octave_step-12;\n      }\n        octave_step= octave_step+12;\n      console.log(octave_step);\n\n      switch(octave_step){\n        case 0: document.getElementById(\"C-first\").innerHTML= \"C4\";\n                document.getElementById(\"C-second\").innerHTML= \"C5\";\n                break;\n        case 12: document.getElementById(\"C-first\").innerHTML= \"C5\";\n                document.getElementById(\"C-second\").innerHTML= \"C6\";\n                break;\n        case 24: document.getElementById(\"C-first\").innerHTML= \"C6\";\n                document.getElementById(\"C-second\").innerHTML= \"C7\";\n                break;\n                case -24: document.getElementById(\"C-first\").innerHTML=\"C2\";\n                          document.getElementById(\"C-second\").innerHTML=\"C3\";\n                          break;\n                          case -12: document.getElementById(\"C-first\").innerHTML= \"C3\";\n                                  document.getElementById(\"C-second\").innerHTML= \"C4\";\n                                  break;\n      }\n\n      var containerWidth = $(\".mini_keyboard\").width();\n      var left = parseFloat($('.highlighted').css('left'));\n    //  console.log(left);\n      var step = (containerWidth * 0.145);\n      if(left > (containerWidth - (2*step))){\n        $('.highlighted').css('left',left);\n      }\n      else{\n        left = left + step;\n        $('.highlighted').css('left',left);\n      }\n    });\n});\n\n\n\n//--------------------------------------------------------------------------------//\ndocument.onkeydown = function(e) {\n  if(!e.repeat){\n//  console.log(\"Hai premuto\", key.indexOf(e.key) )\n  var keypressed=key.indexOf(e.key)\n//  console.log(keypressed)\n  document.getElementById(keypressed).classList.toggle(\"clicked\");\n  playNote(Math.pow(2,(keypressed-9+octave_step)/12)*440, 144);\n  setTimeout(timeOut, 2000);\n   var midi_num = [keypressed+octave_step+60];\n   detect_chord (midi_num);\n  }\n}\n\n// -45,-33,-21,-9,3,15,27\ndocument.onkeyup= function(e) {\n  if(!e.repeat){\n//    console.log(\"Hai rilasciato\", key.indexOf(e.key) )\n  var keypressed=key.indexOf(e.key)\n  document.getElementById(keypressed).classList.toggle(\"clicked\");\n  playNote(Math.pow(2,(keypressed-9+octave_step)/12)*440,128);\n}\n}\n\n//GESTIONE TASTIERA MOUSECLICK\n//Sistemare il playNote al mouseclick\ndocument.querySelectorAll(\".rect_white\").forEach(toggleRect);\n\nfunction toggleRect(rect_white) {\n  rect_white.onmousedown = clickOnRect;\n  rect_white.onmouseup = clickOffRect;\n}\n\nfunction clickOnRect(data) {\n  //console.log(data)\n  var id = data.path[0].id;\n  document.getElementById(id).classList.toggle(\"clicked\");\n  playNote(Math.pow(2,((id)-9+octave_step)/12)*440, 144);\n}\nfunction clickOffRect(data) {\n  //console.log(data)\n  var id = data.path[0].id;\n  document.getElementById(id).classList.toggle(\"clicked\");\n  playNote(Math.pow(2,((id)-9+octave_step)/12)*440, 128);\n}\n\n//GESTIONE MIDI IN INGRESSO\nif (navigator.requestMIDIAccess) {\n    console.log('This browser supports WebMIDI!');\n    navigator.requestMIDIAccess().then(onMIDISuccess);\n  }\nelse {\n    console.log('WebMIDI is not supported in this browser.');\n}\n\n\nfunction onMIDISuccess(midiAccess) {\n    midi = midiAccess;\n  //  console.log(midi.inputs)\n    var allInputs = midi.inputs.values();\n  //loop attorno a tutti gli input per trovare qualsiasi MIDI input\n    for (var input = allInputs.next(); input && !input.done; input = allInputs.next()) {\n    // Quando ricevo un MIDI chiamo la funzione onMIDIMessage\n    input.value.onmidimessage = getMIDImessage;\n  }\n}\n\n\n\nfunction getMIDImessage(midiMessage){\n    var on_off = midiMessage.data[0];\n    var midi_number = midiMessage.data[1];\n    console.log(midi_number);\n    //console.log(on_off);\n    var f= Math.pow(2,(midi_number-69)/12)*440\n    document.getElementById(midi_number-60-octave_step).classList.toggle(\"clicked\");\n    playNote(f, on_off);\n    setTimeout(timeOut, 2000);\n    if(on_off==144){\n    detect_chord(midi_number);\n    }\n    else{\n       //midi_vec=[];\n    }\n}\n\n\n\nfunction playNote(freq,on_off){\n  switch(on_off){\n    case 144:\n\n              var o = c.createOscillator();\n              var g = c.createGain();\n              o.type=\"triangle\";\n              o.connect(g);\n              g.connect(volume_master);\n              volume_master.connect(analyser);\n              o.frequency.value = freq;\n              g.gain.value=0;\n              //g.gain.setValueAtTime(0, c.currentTime);\n              g.gain.linearRampToValueAtTime(1, c.currentTime+0.5); //Problematica: se il testo viene premuto e rilasciato subito, il suono continua all'infinito. AGGIUSTARE QUEST'ASPETTO\n              g.gain.linearRampToValueAtTime(0.6, c.currentTime+0.4);\n              o.start();\n              gain_vec[freq]=g;\n              drawSamples();\n              break;\n    case 128:\n              releaseNote(freq);\n              break;\n  }\n}\n\n\nfunction releaseNote(f){\n     gain_vec[f].gain.linearRampToValueAtTime(0, c.currentTime+0.5);\n}\n\n\n//-------------DETECTION CHORD FUNCTION-----------------//\n\n\nfunction detect_chord(midi_num){\n    midi_vec.push(midi_num);\n    note_vec.push(Note.pc(Note.fromMidi(midi_num, true)));\n  //  console.log(note_vec);\n  if(note_vec.length==4 && midi_vec.length==4 && chords_vec.length<4){\n      collect_midi.push(midi_vec);\n    //  console.log(collect_midi);\n      collect_note.push(note_vec);\n      var min_midi = Math.min.apply(Math, midi_vec)\n      var bass_note= Note.fromMidi(min_midi);\n      var accordo = getKey(dict,note_vec);\n      chord_=getKey(dict,note_vec)+\"/\"+bass_note;\n      chords_vec.push(chord_);\n      find_indexes(accordo);\n      blink(color_chord);\n      var chiave= findKey(accordo,counter,chords_vec);\n      console.log(chiave);\n      render(chords_vec,chiave);  //VISUALIZZA SULLO SCHERMO\n      scale(chiave);\n\n\n      console.log(chords_vec);\n\n  }\n}\n\nfunction find_indexes(chord) {\nfor(var i=0; i<circle.length; i++){\n   for(var j=0; j<circle[i].length; j++){\n       if(circle[i][j] == chord){\n          color_chord.push([i,j,0]);\n\n    //       console.log(\"found \" + chord + \" at (\" + i + \", \" + j + \")\");\n         }\n         }\n}\n   console.log(\"color chord\",color_chord);\n}\n\n\nfunction scale(key_arr){\n  var appoggio;\n  for(var j=0; j<key_arr.length; j++){\n  var arr=[];\n  var index_maj=chromatic_scale.indexOf(key_arr[j]);\n  if(chromatic_scale[index_maj].includes(\"#\")){\n    appoggio=chromatic_scale[index_maj].replace(\"/\",\"_\")\n    arr.push(appoggio.replace(\"#\",\"sharp\"));\n  }else{\n  arr.push(chromatic_scale[index_maj]);\n}\n      for(i=0; i<maj_scale.length; i++){\n        index_maj=index_maj+maj_scale[i];\n\n        if(index_maj>=chromatic_scale.length){\n          index_maj=index_maj%chromatic_scale.length;\n        }\n        console.log(index_maj);\n\n        if(chromatic_scale[index_maj].includes(\"#\")){\n          appoggio=chromatic_scale[index_maj].replace(\"/\",\"_\")\n          arr.push(appoggio.replace(\"#\",\"sharp\"));\n        }else{\n        arr.push(chromatic_scale[index_maj]);\n      }\n\n      }\n  scale_maj.push(arr);\n  console.log(scale_maj);\n  arr=[];\n  //    console.log(scale_min);\n  }\n\n  for(var i=0; i<scale_maj[change_scale].length;i++){\n         $(\"#\"+scale_maj[change_scale][i]).css(\"visibility\", \"visible\");\n    }\n  console.log(scale_maj);\n}\n\nfunction drawSamples(){\n  analyser.getByteFrequencyData(dataArray);\n  context.clearRect(0,0,canvas3.width, canvas3.height)\n  context.beginPath();\nfor(var i=0; i<canvas3.width;i++){\n  context.lineTo(dataArray[i],i);\n}\n  context.stroke();\n  context.strokeStyle = \"white\";\n  requestAnimationFrame(drawSamples)\n}\n"]}